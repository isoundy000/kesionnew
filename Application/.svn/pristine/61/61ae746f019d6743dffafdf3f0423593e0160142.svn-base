webpackJsonp([47],{dkXf:function(t,a){},uOp3:function(t,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=s("rVsN"),n=s.n(e),o=s("60kx");var i=s("Cnzd"),c=s("gEVN"),l={components:{MediaUpload:i.a,mediaPreview:c.a},name:"answer",data:function(){return{loading:!1,answerid:null,head:"",type:"",items:"",social_data:{json:{}},form:{name:""},addAnswer:{is_show:"",status:"",is_open:!1,content:"",info:[]},is_show:!1}},watch:{$route:function(t,a){this.$router.go(0)}},computed:{},activated:function(){var t,a=this,s=this.$route.query.id;(t={id:s},new n.a(function(a){Object(o.b)("Social.showAnswer",t).then(function(t){a(t)})})).then(function(t){a.resetJson(t.social_data.json),a.social_data=t.social_data,a.head=t.social_data.head,a.answerid=t.social_data.id,a.social_data.is_show=t.social_data.is_show,a.social_data.status=t.social_data.status,a.social_data.is_open=t.social_data.is_open}),this.is_show=!0},deactivated:function(){this.is_show=!1},methods:{resetJson:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};switch(t.$info={},Number(t.type)){case 1:t.$type="image";var a=[];t.info instanceof Array&&t.info.map(function(t){a.push({src:t})}),t.$info={list:a};break;case 2:t.$type="video",t.$info={src:t.info[0]||""};break;case 3:t.$type="audio",t.$info={src:t.info[0]||""}}},onMediaUploadChange:function(t){"image"==t.type&&(this.type="1"),"video"==t.type&&(this.type="2"),"audio"==t.type&&(this.type="3"),this.addAnswer.info=t.info},upload:function(){this.$uploadImage(function(t){})},delAsk:function(t){var a=this;this.$confirm("确认删除吗？该操作不可逆",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var s;(s={id:t,type:1},new n.a(function(t){Object(o.b)("Social.delAsk",s).then(function(a){t(a)})})).then(function(t){(t.result="success")&&a.$router.push({path:"/?url=home.html/answer/Index/Index"})})})},confirmAnswer:function(){var t=this;(function(t){return new n.a(function(a){Object(o.b)("Social.replyTeacher",t).then(function(t){a(t)})})})({id:this.answerid,type:this.type,info:this.addAnswer.info,content:this.addAnswer.content,status:this.social_data.status,is_open:this.social_data.is_open,is_show:this.social_data.is_show}).then(function(a){t.$msg("回复成功！","success"),t.$router.push({path:"/?url=home.html/answer/Index/Index"})})},open:function(){this.$router.push("/?url=home.html/users/Index/showgroup?appid-9")}}},r={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return t.is_show?s("ks-container",[s("ks-title",{staticStyle:{"margin-bottom":"20px"},attrs:{name:"答疑中心/查看问题"}}),t._v(" "),s("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[s("el-row",[s("el-col",{attrs:{span:1}},[s("el-avatar",{attrs:{size:40,src:t.head}})],1),t._v(" "),s("el-col",{attrs:{span:9}},[s("el-row",[t._v(t._s(t.social_data.inputer))]),t._v(" "),s("el-row",[t._v(t._s(t.social_data.adddate))])],1)],1),t._v(" "),s("el-row",[s("el-col",{attrs:{span:1}},[t._v(" ")]),t._v(" "),s("el-col",{staticClass:"title",attrs:{span:9}},[t._v(t._s(t.social_data.title))])],1),t._v(" "),s("el-row",[s("el-col",{attrs:{span:1}},[t._v(" ")]),t._v(" "),s("el-col",{staticClass:"content title",attrs:{span:9}},[t._v(t._s(t.social_data.json.content))])],1),t._v(" "),s("el-row",{staticClass:"info_img"},[s("el-col",{attrs:{span:1}},[t._v(" ")]),t._v(" "),s("el-col",{attrs:{span:9}},[s("div",[s("media-preview",{attrs:{type:t.social_data.json.$type,info:t.social_data.json.$info}})],1)])],1),t._v(" "),s("div",{staticClass:"circuse"},[s("el-switch",{attrs:{"active-color":"#13ce66","inactive-text":"是否前台展示"},model:{value:t.social_data.is_show,callback:function(a){t.$set(t.social_data,"is_show",a)},expression:"social_data.is_show"}}),t._v(" "),s("span",{staticClass:"font"},[t._v("选择关闭，该问题仅老师和提问人可见")]),t._v(" "),s("span",{staticClass:"circusee"},[t._v(t._s(t.social_data.reply_num)+"人围观")])],1),t._v(" "),s("el-row",{staticClass:"del"},[s("el-col",{attrs:{span:1}},[t._v(" ")]),t._v(" "),s("el-col",{attrs:{span:9}},[s("span",{on:{click:function(a){return t.delAsk(t.answerid)}}},[s("a",{staticClass:"font-a"},[t._v("删除问题")])])])],1),t._v(" "),s("el-row",{staticClass:"del-line"}),t._v(" "),s("el-row",{staticClass:"status"},[s("el-col",{attrs:{span:1}},[t._v(" ")]),t._v(" "),s("el-col",{staticStyle:{width:"4%"}},[t._v("审核状态")]),t._v(" "),s("el-col",{attrs:{span:1}},[s("el-switch",{attrs:{"active-color":"#13ce66"},model:{value:t.social_data.status,callback:function(a){t.$set(t.social_data,"status",a)},expression:"social_data.status"}})],1)],1),t._v(" "),s("el-row",[s("el-col",{attrs:{span:1}},[t._v(" ")]),t._v(" "),s("el-col",{attrs:{span:9}},[s("el-input",{attrs:{type:"textarea",placeholder:"请输入回复内容",resize:"none",maxlength:"144"},model:{value:t.addAnswer.content,callback:function(a){t.$set(t.addAnswer,"content",a)},expression:"addAnswer.content"}})],1)],1),t._v(" "),s("el-row",{staticClass:"upload"},[s("el-col",{attrs:{span:1}},[t._v(" ")]),t._v(" "),s("el-col",{attrs:{span:9}},[s("media-upload",{on:{change:t.onMediaUploadChange}})],1)],1),t._v(" "),s("el-row",{staticClass:"open"},[s("el-col",{attrs:{span:1}},[t._v(" ")]),t._v(" "),s("el-col",{staticStyle:{width:"5.3%"}},[t._v("回答是否公开")]),t._v(" "),s("el-col",{attrs:{span:1}},[s("el-switch",{attrs:{"active-color":"#13ce66"},model:{value:t.social_data.is_open,callback:function(a){t.$set(t.social_data,"is_open",a)},expression:"social_data.is_open"}})],1),t._v(" "),s("el-col",{staticClass:"font",attrs:{span:6}},[t._v("\n        若不公开，则学员需要成为付费会员才可以查看\n        "),s("a",{staticClass:"font-a",on:{click:function(a){return t.open()}}},[t._v("设置付费会员")])])],1),t._v(" "),s("div",{staticClass:"add-answer-footer"},[s("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.confirmAnswer}},[t._v("确认回复")])],1)],1)],1):t._e()},staticRenderFns:[]};var d=s("C7Lr")(l,r,!1,function(t){s("dkXf")},"data-v-2ffc9c72",null);a.default=d.exports}});