webpackJsonp([36],{cyyB:function(t,n){},qynA:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("BXtI"),r={name:"AddGroup",data:function(){return{loading:!1,groupInfo:null}},watch:{"groupInfo.name":function(t,n){t.length>30&&(this.groupInfo.name=n)}},methods:{addAttr:function(){if(this.groupInfo.json.length>3)return this.$message.error("最多只能4行");this.groupInfo.json.push({name:"",content:[{name:""}]})},delAttr:function(t){this.groupInfo.json.splice(t,1)},saveTrainCamp:function(){var t=this;if(!this.groupInfo.name.length>0)return this.$msg("规格组名称不能为空"),this.$refs.groupName.focus(),!1;if(!this.groupInfo.json.length>0)return this.$msg("规格组属性不能为空"),!1;for(var n=0;n<this.groupInfo.json.length;n++){if(!this.groupInfo.json[n].name.length)return this.$refs["attrName"+n].focus(),void this.$msg("属性名称不能为空");for(var e=0;e<this.groupInfo.json[n].content.length;e++)if(!this.groupInfo.json[n].content[e].name.length)return this.$refs["attrContent"+n+e][0].focus(),void this.$msg("属性内容不能为空")}Object(o.g)(this.groupInfo).then(function(n){t.$msg("保存成功","success").then(function(){t.$router.push({name:"GoodsSet"})})})},addAttrContent:function(t){if(this.groupInfo.json[t].content.length>4)return this.$message.error("最多只能添加5项");this.groupInfo.json[t].content.push({name:""})},delAttrContent:function(t,n){this.groupInfo.json[t].content.splice(n,1)}},activated:function(){var t=this;this.loading=!1,this.$route.query.id?Object(o.k)({id:this.$route.query.id}).then(function(n){t.groupInfo=n,delete t.groupInfo.result,t.loading=!0}):(this.groupInfo={name:"",json:[{name:"",content:[{name:""}]}]},this.loading=!0)}},a={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return t.loading?e("ks-container",[e("el-breadcrumb",{staticClass:"breadcrumb",attrs:{separator:"/"}},[e("el-breadcrumb-item",{attrs:{to:{path:"/goodsset"}}},[t._v("教辅周边设置")]),t._v(" "),e("el-breadcrumb-item",[t._v("添加规格组")])],1),t._v(" "),e("main",[e("el-row",[e("h4",{staticClass:"group-theme"},[e("span",{staticClass:"group__star"},[t._v("*")]),t._v("规格组名称\n      ")]),t._v(" "),e("el-input",{ref:"groupName",model:{value:t.groupInfo.name,callback:function(n){t.$set(t.groupInfo,"name",n)},expression:"groupInfo.name"}},[e("span",{staticClass:"groupName-limit",attrs:{slot:"suffix"},slot:"suffix"},[t._v(t._s(t.groupInfo.name.length)+"/30")])])],1),t._v(" "),e("el-row",[e("h4",{staticClass:"group-theme"},[e("span",{staticClass:"group__star"},[t._v("*")]),t._v("规格组属性\n      ")]),t._v(" "),e("el-table",{ref:"multipleTable",staticStyle:{width:"700px"},attrs:{data:t.groupInfo.json,"tooltip-effect":"dark"}},[e("el-table-column",{attrs:{label:"属性名称",width:"150"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("el-input",{ref:"attrName"+n.$index,attrs:{placeholder:"属性名称"},model:{value:n.row.name,callback:function(e){t.$set(n.row,"name",e)},expression:"scope.row.name"}})]}}],null,!1,737745932)}),t._v(" "),e("el-table-column",{attrs:{label:"属性内容"},scopedSlots:t._u([{key:"default",fn:function(n){return t._l(n.row.content,function(o,r){return e("div",{key:r,staticClass:"attr-content-row"},[e("el-input",{ref:"attrContent"+n.$index+r,refInFor:!0,staticClass:"attr-content-input",attrs:{placeholder:"属性内容"},model:{value:o.name,callback:function(n){t.$set(o,"name",n)},expression:"item.name"}}),t._v(" "),n.row.content.length>1?e("el-tooltip",{attrs:{effect:"dark",content:"删除",placement:"bottom"}},[e("i",{staticClass:"iconfont icon-shanchu1 delete-icon",on:{click:function(e){return t.delAttrContent(n.$index,r)}}})]):t._e()],1)})}}],null,!1,1541618684)}),t._v(" "),e("el-table-column",{attrs:{label:"操作",align:"center",width:"150"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("el-tooltip",{attrs:{effect:"dark",content:"添加属性内容",placement:"bottom",enterable:!1}},[e("i",{staticClass:"iconfont icon-tianjia add-icon",on:{click:function(e){return t.addAttrContent(n.$index)}}})]),t._v(" "),e("el-tooltip",{attrs:{effect:"dark",content:"删除",placement:"bottom"}},[e("i",{staticClass:"iconfont icon-shanchu1 delete-icon",on:{click:function(e){return t.delAttr(n.$index)}}})])]}}],null,!1,3758859317)})],1),t._v(" "),e("el-button",{staticClass:"add-attr-btn",attrs:{type:"primary",plain:""},on:{click:t.addAttr}},[t._v("添加属性")])],1)],1),t._v(" "),e("footer",[e("el-button",{attrs:{type:"primary"},on:{click:t.saveTrainCamp}},[t._v("保存返回")]),t._v(" "),e("el-button",{attrs:{plain:""},on:{click:function(n){return t.$router.go(-1)}}},[t._v("取消")])],1)],1):t._e()},staticRenderFns:[]};var s=e("C7Lr")(r,a,!1,function(t){e("cyyB")},"data-v-6675a17c",null);n.default=s.exports}});