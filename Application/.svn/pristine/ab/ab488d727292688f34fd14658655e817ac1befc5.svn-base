webpackJsonp([42],{a7zs:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("g+M4"),s={name:"ParperMarkingList",data:function(){return{searchContent:"",p:1,pageCount:null,tableData:[],totalPut:0,searchType:[{value:"0",label:"用户名"}],screening:"用户名",multipleSelection:[],tkidArr:[],paperid:0}},activated:function(){this.searchContent="",this.p=1,this.paperid=this.$route.query.paperId,this.pageCount=null,this.tableData=[],this.totalPut=0,this.getList()},methods:{getList:function(){var t=this;this.$showLoading();var e={p:this.p,paperid:this.paperid,maxperpage:10};this.searchContent&&(e.keyword=this.searchContent),Object(n.i)(e).then(function(e){e.list.map(function(t){0==t.time||t.time,0==t.iscorrect?t.iscorrect="未阅卷":t.iscorrect="已阅卷",0==t.time?t.time="1分":t.time=t.time+"分"}),t.tableData=e.list,t.p=e.page.now_page,t.pageCount=e.page.total_pages,t.totalPut=parseInt(e.page.totalput),t.$hideLoading()})},handleSelectionChange:function(t){if(this.multipleSelection=t,this.multipleSelection){var e=[];this.multipleSelection.map(function(t){e.push(t.id)}),this.tkidArr=e}},handleCurrentChange:function(t){this.tableData=[],this.p=t,this.getList()},golist:function(t){this.tableData=[],this.getList()},handleCommand:function(t){1==t.type?this.$router.push({path:"/exam/marking",query:{id:t.arr.id,paperid:this.paperid}}):2==t.type&&this.del(t.arr.id,t.$index)},bathMark:function(){this.$router.push({path:"/exam/BatchMark",query:{paperid:this.paperid}})},comment:function(){this.$router.push({path:"/exam/BatchComment",query:{paperid:this.paperid}})},del:function(t,e){var a=this;Object(n.g)({type:3,id:t}).then(function(t){"success"==t.result&&a.tableData.splice(e,1)})},allDel:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.length?Object(n.g)({type:3,id:e}).then(function(e){"success"==e.result&&(t.$msg("删除成功","success"),t.getList())}):this.$msg("请先选择要删除项")}}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ks-container",[a("ks-title",{attrs:{name:"批改试卷",border:"none"}}),t._v(" "),a("el-row",{staticClass:"ks-bo20"},[a("el-col",{attrs:{span:16}},[a("el-select",{staticClass:"ks-w150",attrs:{placeholder:"请选择难度"},on:{change:t.golist},model:{value:t.screening,callback:function(e){t.screening=e},expression:"screening"}},t._l(t.searchType,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1),t._v(" "),a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入搜索关键词"},on:{change:t.getList},model:{value:t.searchContent,callback:function(e){t.searchContent=e},expression:"searchContent"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},slot:"append"})],1)],1),t._v(" "),a("el-col",{attrs:{span:8,align:"right"}},[a("el-button",{attrs:{type:"primary"},on:{click:t.bathMark}},[t._v("批量阅卷")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.allDel(t.tkidArr)}}},[t._v("批量删除")])],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{type:"index",width:"55",label:"序号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"username",label:"考生",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{prop:"adddate",label:"考试时间"}}),t._v(" "),a("el-table-column",{attrs:{prop:"time",label:"用时"}}),t._v(" "),a("el-table-column",{attrs:{label:"是否已阅卷"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{class:{"ks-color-success":"已阅卷"==e.row.iscorrect}},[t._v(t._s(e.row.iscorrect))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"总分",prop:"paper_score"}}),t._v(" "),a("el-table-column",{attrs:{label:"得分"},scopedSlots:t._u([{key:"default",fn:function(e){return a("span",{staticClass:"ks-color-primary"},[t._v(t._s(e.row.sumscore))])}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-dropdown",{attrs:{trigger:"click"},on:{command:t.handleCommand}},[a("span",{staticClass:"el-dropdown-link"},[a("i",{staticClass:"el-icon-more"})]),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:{type:"1",arr:e.row}}},[t._v("批改试卷")]),t._v(" "),a("el-dropdown-item",{attrs:{command:{type:"2",arr:e.row,index:e}}},[t._v("删除")])],1)],1)]}}])})],1)],1)],1),t._v(" "),a("div",{staticClass:"ks-mt20",attrs:{align:"right"}},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next","current-page":t.p,"page-count":t.pageCount},on:{"current-change":t.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var r=a("C7Lr")(s,l,!1,function(t){a("zuix")},"data-v-46599176",null);e.default=r.exports},zuix:function(t,e){}});