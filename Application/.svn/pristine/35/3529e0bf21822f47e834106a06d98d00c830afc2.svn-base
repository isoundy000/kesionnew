webpackJsonp([35],{PmIv:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i("zk/d"),r=i("vMJZ"),s=i("0xDb"),a=i("Pg5c"),n=i("QKi/"),l={name:"Register",components:{VHeader:a.a,VFooter:n.a},mixins:[o.a],data:function(){return{agree:!1,buttonText:"获取验证码",second:60,formData:{code:"",usertype:0,sitename:"",password:"",mobile:""},rules:{sitename:[{required:!0,message:"学校名称/教师姓名/大V名称等",trigger:"blur"}],mobile:[{validator:function(e,t,i){t.length<11?i(new Error("请输入11位数手机号")):Object(s.h)(t)?i():i(new Error("手机号码无效"))},trigger:"blur"}],code:[{required:!0,message:"请输入验证码",trigger:"blur"}],password:[{validator:function(e,t,i){t.length<6?i(new Error("密码不得小于6位数")):t.length>20?i(new Error("请输入6-20位数密码")):i()},trigger:"blur"}]},windowWidth:window.innerWidth,height:window.innerWidth>=768?window.innerHeight-180:window.innerHeight}},mounted:function(){var e=this;window.onresize=function(){e.windowWidth=window.innerWidth,e.height=window.innerWidth>=768?window.innerHeight-180:window.innerHeight},this.isWeiXin()?this.formData.befrom=2:this.formData.befrom=1,this.formData.usertype="teacher"===this.$route.query.from?1:2,this.formData.salesman=this.$route.query.salesman||"",this.formData.openid=this.$route.query.openid||"",this.formData.unionid=this.$route.query.unionid||""},methods:{isWeiXin:function(){return"micromessenger"==window.navigator.userAgent.toLowerCase().match(/MicroMessenger/i)},register:function(){var e=this;this.$refs.regForm.validate(function(t){if(t){if(!e.agree)return void e.$msg("请先同意《科汛V名师服务协议》");Object(r.f)(e.formData).then(function(t){"success"===t.result?(e.formData.code="",e.formData.usertype=1,e.formData.sitename="",e.formData.password="",e.formData.mobile="",e.$msg("注册成功","success").then(function(){"website"===e.$route.query.source?window.open(t.url):location.href=t.url})):e.$msg(t.msg)})}})},getCode:function(){var e=this,t=this.formData.mobile;t.length<11?this.$alert("请输入11位数手机号","提示",{type:"warning"}):Object(s.h)(t)?this.second>0&&"获取验证码"!==this.buttonText||this.sending||(this.sending=!0,Object(r.e)({type:1,mobile:t}).then(function(t){"success"===t.result?e.updateButtonText():e.$msg(t.msg),e.sending=!1})):this.$alert("手机号码无效","提示",{type:"warning"})},updateButtonText:function(){var e=this;this.second>0?(this.buttonText=this.second+"秒后重新获取",setTimeout(function(){e.second-=1,e.updateButtonText()},1e3)):(this.buttonText="获取验证码",this.second=60)},handlerMobile:function(){if(this.formData.mobile){var e=this.formData.mobile.match(/[0-9]+/);e&&e[0]?this.formData.mobile=e[0]:this.formData.mobile=""}}}},c={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.storeType>0?o("div",["website"!==e.$route.query.source?o("v-header",{attrs:{"store-type":e.storeType,"window-width":e.windowWidth}}):e._e(),e._v(" "),o("div",{staticClass:"login-box",class:"website"===e.$route.query.source&&"login-box--frame",style:{minHeight:e.windowWidth>=768?e.height+"px":e.height-84+"px"}},[o("div",{staticClass:"login-box__inner"},[o("el-row",[e.windowWidth>=768?o("el-col",{attrs:{span:14}},[o("div",{staticClass:"login-box__left"},[1==e.storeType?o("img",{staticStyle:{width:"100%",display:"block"},attrs:{src:i("PnWz")}}):2==e.storeType?o("img",{staticStyle:{width:"100%",display:"block"},attrs:{src:i("3N34")}}):e._e()])]):e._e(),e._v(" "),o("el-col",{attrs:{span:e.windowWidth>=768?10:24}},[o("div",{staticClass:"login-box__right"},[o("div",{staticClass:"login-box__title"},[e._v("\n                            "+e._s("website"===e.$route.query.source?"科汛云开店注册":"账号注册")+"\n                            \n                        ")]),e._v(" "),o("el-form",{ref:"regForm",attrs:{model:e.formData,rules:e.rules}},[o("el-form-item",{attrs:{prop:"sitename"}},[o("div",{staticClass:"login-box__cell"},[o("el-input",{attrs:{placeholder:"学校名称/教师姓名/大V名称等"},model:{value:e.formData.sitename,callback:function(t){e.$set(e.formData,"sitename",t)},expression:"formData.sitename"}})],1)]),e._v(" "),o("el-form-item",{attrs:{prop:"mobile"}},[o("div",{staticClass:"login-box__cell"},[o("el-input",{attrs:{placeholder:"手机号"},on:{input:e.handlerMobile},model:{value:e.formData.mobile,callback:function(t){e.$set(e.formData,"mobile",t)},expression:"formData.mobile"}})],1)]),e._v(" "),o("el-form-item",{attrs:{prop:"code"}},[o("div",{staticClass:"login-box__cell login-box__cell--code"},[o("el-button",{attrs:{type:"primary",disabled:e.second>0&&"获取验证码"!==e.buttonText,size:"medium",plain:""},on:{click:e.getCode}},[e._v(e._s(e.buttonText))]),e._v(" "),o("el-input",{attrs:{maxlength:"6",placeholder:"验证码"},model:{value:e.formData.code,callback:function(t){e.$set(e.formData,"code",t)},expression:"formData.code"}})],1)]),e._v(" "),o("el-form-item",{attrs:{prop:"password"}},[o("div",{staticClass:"login-box__cell"},[o("el-input",{attrs:{type:"password",placeholder:"设置密码"},model:{value:e.formData.password,callback:function(t){e.$set(e.formData,"password",t)},expression:"formData.password"}})],1)])],1),e._v(" "),o("div",{staticClass:"login-box__cell",staticStyle:{"line-height":"25px"}},[o("el-checkbox",{model:{value:e.agree,callback:function(t){e.agree=t},expression:"agree"}},[e._v("我已阅读并同意")]),e._v(" "),o("a",{attrs:{href:"//store.kesion.com/home.html/default/Register/"+(1==e.storeType?"tcAgreement":"agreement"),target:"_blank"}},[e._v("《"+e._s(1==e.storeType?"科汛V名师":"科汛云开店")+"服务协议》")])],1),e._v(" "),o("div",{staticClass:"login-box__cell"},[o("el-button",{staticClass:"login-box__button",attrs:{type:"primary"},on:{click:e.register}},[e._v("立即注册")])],1),e._v(" "),o("div",{staticClass:"login-box__cell login-box__cell--fot"},[e._v("\n                            已有账号？ "),o("router-link",{attrs:{to:{path:"/login",query:e.$route.query}}},[e._v("马上登陆")])],1)],1)])],1)],1)]),e._v(" "),e.windowWidth>=768&&"website"!==e.$route.query.source?o("v-footer"):e._e()],1):e._e()},staticRenderFns:[]};var d=i("C7Lr")(l,c,!1,function(e){i("oTsl")},"data-v-6e32057a",null);t.default=d.exports},oTsl:function(e,t){}});