webpackJsonp([18],{CRRO:function(t,e){},bwub:function(t,e,i){"use strict";e.e=function(t){return new a.a(function(e){Object(s.b)("Users.vipList",t).then(function(t){e(t)})})},e.b=function(t){return new a.a(function(e){Object(s.b)("Users.editVip",t).then(function(t){e(t)})})},e.a=function(t){return new a.a(function(e){Object(s.b)("Users.delVip",t).then(function(t){e(t)})})},e.c=function(t){return new a.a(function(e){Object(s.b)("Users.explainShow",t).then(function(t){e(t)})})},e.d=function(t){return new a.a(function(e){Object(s.b)("Users.explainVip",t).then(function(t){e(t)})})};var n=i("rVsN"),a=i.n(n),s=i("60kx")},d7Pc:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("lC5x"),a=i.n(n),s=i("J0Oq"),l=i.n(s),o=i("bwub"),r={props:{info:Object,PrivilegeId:String},data:function(){return{options:[{label:"天",value:"0"},{label:"月",value:"1"},{label:"年",value:"2"}],value:"0",form:{id:"",type:"0",timetype:"0",time:"",sort:"",price:"",uprice:""},formLabelWidth:"120px",dialogFormVisible:!0}},methods:{close:function(){this.$emit("isshow",!1)},dialogForm:function(){this.$emit("isshow",!1)},adduser:function(){var t=this;return l()(a.a.mark(function e(){var i;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(o.b)(t.form);case 2:"success"===(i=e.sent).result&&(t.$message.success(""+i.msg),t.$emit("addusers",!1));case 4:case"end":return e.stop()}},e,t)}))()},getmsg:function(){var t=this.info,e=this.form;e.type=t.type,e.time=t.time,e.timetype=t.timetype,e.sort=t.sort,e.price=t.price,e.uprice=t.uprice}},created:function(){this.form.id=this.info.id,this.getmsg()},watch:{info:function(){this.getmsg()},deep:!0}},c={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{attrs:{title:"新增VIP",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e},close:t.close}},[i("el-form",{attrs:{model:t.form}},[i("el-form-item",{attrs:{label:"VIP类型","label-width":t.formLabelWidth}},[i("el-radio",{attrs:{label:"0"},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},[t._v("VIP")]),t._v(" "),i("el-radio",{attrs:{label:"1"},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},[t._v("SVIP")])],1),t._v(" "),i("el-form-item",{attrs:{label:"有效时间","label-width":t.formLabelWidth}},[i("el-input",{staticClass:"timetype",attrs:{oninput:"value=value.replace(/[^\\d.]/g,'')",autocomplete:"off",placeholder:"请输入",maxlength:"2","show-word-limit":""},model:{value:t.form.time,callback:function(e){t.$set(t.form,"time",e)},expression:"form.time"}}),t._v(" "),i("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.timetype,callback:function(e){t.$set(t.form,"timetype",e)},expression:"form.timetype"}},t._l(t.options,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),i("el-form-item",{attrs:{label:"排序","label-width":t.formLabelWidth}},[i("el-input",{staticClass:"timetype",attrs:{autocomplete:"off",placeholder:"请输入",maxlength:"6","show-word-limit":"",oninput:"value=value.replace(/[^\\d.]/g,'')"},model:{value:t.form.sort,callback:function(e){t.$set(t.form,"sort",e)},expression:"form.sort"}}),t._v(" "),i("span",{staticClass:"sortnum"},[t._v("数值越大越靠前")])],1),t._v(" "),i("el-form-item",{attrs:{label:"价格","label-width":t.formLabelWidth}},[i("el-input",{staticClass:"timetype",attrs:{oninput:"value=value.replace(/[^\\d.]/g,'')",autocomplete:"off",placeholder:"请输入"},model:{value:t.form.price,callback:function(e){t.$set(t.form,"price",e)},expression:"form.price"}}),t._v(" "),i("span",{staticClass:"isprice"},[t._v("元")])],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:t.dialogForm}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.adduser}},[t._v("确 定")])],1)],1)},staticRenderFns:[]};var u={components:{NewPrivilege:i("C7Lr")(r,c,!1,function(t){i("CRRO")},null,null).exports},data:function(){return{info:{},allflag:!1,list:[],listpage:{},page:{p:1,maxperpage:10},listid:[],flagShow:!1,PrivilegeId:""}},methods:{addusers:function(){this.flagShow=!1,this.getList()},addPrivilege:function(){this.flagShow=!0,this.info={type:"0"}},isshow:function(t){this.flagShow=t},getList:function(){var t=this;return l()(a.a.mark(function e(){var i;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(o.e)(t.page);case 2:(i=e.sent).list.map(function(t){t.flag=!1}),t.list=i.list,t.listpage=i.page;case 6:case"end":return e.stop()}},e,t)}))()},handleCurrentChange:function(t){this.page.p=t,this.getList()},allcheck:function(){var t=this,e=[];this.list.map(function(i){i.flag=!!t.allflag,i.flag?e.push(i.id):e=[]}),this.listid=e},checkbox:function(){var t=[],e=0;this.list.map(function(i){i.flag&&(e++,t.push(i.id))}),this.listid=t,this.allflag=this.list.length==e},compile:function(t){this.info=t,this.flagShow=!0},del:function(t,e){var i=this;this.$confirm("此操作将永久删除该会员, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(l()(a.a.mark(function e(){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(n=[]).push(t.id),e.next=4,Object(o.a)({id:n});case 4:"success"==e.sent.result&&(i.getList(),i.$message({type:"success",message:"删除成功!"}));case 6:case"end":return e.stop()}},e,i)}))).catch(function(){})},moredel:function(){var t=this;if(!this.listid.length)return this.$message({type:"error",message:"请选择要删除的会员"});this.$confirm("此操作将永久删除该会员, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(l()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(o.a)({id:t.listid});case 2:"success"==e.sent.result&&(t.getList(),t.$message({type:"success",message:"删除成功!"}));case 4:case"end":return e.stop()}},e,t)}))).catch(function(){})}},created:function(){this.getList()},watch:{list:function(){this.allflag=!1,this.listid=[]},listpage:function(){this.listpage.totalput==(this.page.p-1)*this.page.maxperpage&&0!=this.listpage.total&&(this.page.p-=1,this.getList())},deep:!0}},p={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ks-container",{staticClass:"page"},[i("ks-title",{attrs:{name:"VIP中心",border:"none"}}),t._v(" "),i("div",{staticClass:"privilege"},[i("el-button",{attrs:{type:"primary",icon:"iconfont icon-plus",size:"small"},on:{click:function(e){return t.addPrivilege()}}},[t._v("新增VIP")]),t._v(" "),i("el-button",{staticClass:"privilege-msg",attrs:{type:"info",size:"small"},on:{click:function(e){return t.$router.push("/setprivilege")}}},[t._v("VIP设置")])],1),t._v(" "),i("el-table",{staticClass:"main",staticStyle:{width:"100%"},attrs:{data:t.list,"tooltip-effect":"dark"}},[i("el-table-column",{attrs:{label:"选择",align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-checkbox",{on:{change:t.checkbox},model:{value:e.row.flag,callback:function(i){t.$set(e.row,"flag",i)},expression:"scope.row.flag"}})]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"VIP类型",align:"center","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(1==e.row.type?"svip":"vip"))])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"有效时间",align:"center","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v("\n                        "+t._s(e.row.time)+"\n                        "),0==e.row.timetype?i("span",[t._v("天")]):1==e.row.timetype?i("span",[t._v("个月")]):i("span",[t._v("年")])])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"adddate",label:"添加时间",align:"center","min-width":"100"}}),t._v(" "),i("el-table-column",{attrs:{prop:"sort",label:"排序",align:"center","min-width":"100"}}),t._v(" "),i("el-table-column",{attrs:{prop:"price",label:"价格",align:"center","min-width":"100"}}),t._v(" "),i("el-table-column",{attrs:{prop:"price",label:"操作",align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-dropdown",{attrs:{trigger:"click",placement:"bottom"}},[i("i",{staticClass:"el-icon-more"}),t._v(" "),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("span",[i("el-dropdown-item",{staticStyle:{"text-align":"center"},nativeOn:{click:function(i){return t.compile(e.row)}}},[t._v("编辑")])],1),t._v(" "),i("span",[i("el-dropdown-item",{staticStyle:{"text-align":"center"},nativeOn:{click:function(i){return t.del(e.row,e.$index)}}},[t._v("删除")])],1)])],1)]}}])})],1),t._v(" "),i("div",{staticClass:"pirfooter"},[i("div",{staticClass:"pirfooter-left"},[i("span",[i("el-checkbox",{on:{change:t.allcheck},model:{value:t.allflag,callback:function(e){t.allflag=e},expression:"allflag"}},[t._v("全选")]),t._v(" "),i("el-button",{attrs:{icon:"el-icon-delete"},on:{click:t.moredel}})],1)]),t._v(" "),i("div",{staticClass:"pirfooter-right"},[i("el-pagination",{attrs:{background:"",layout:"prev, pager, next","page-size":t.page.maxperpage,total:Number(t.listpage.totalput),"current-page":t.page.p},on:{"current-change":t.handleCurrentChange}})],1)]),t._v(" "),t.flagShow?i("new-privilege",{attrs:{info:t.info},on:{isshow:t.isshow,addusers:t.addusers}}):t._e()],1)},staticRenderFns:[]};var f=i("C7Lr")(u,p,!1,function(t){i("uEuU")},"data-v-0ed583e2",null);e.default=f.exports},uEuU:function(t,e){}});