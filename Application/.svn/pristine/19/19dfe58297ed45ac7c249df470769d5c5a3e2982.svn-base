webpackJsonp([28],{EIOx:function(t,e,n){"use strict";e.a=function(t){return new l.a(function(e){Object(r.b)("FriendsHelp.addMarket",t).then(function(t){e(t)})})},e.f=function(t){return new l.a(function(e){Object(r.b)("FriendsHelp.marketList",t).then(function(t){e(t)})})},e.e=function(t){return new l.a(function(e){Object(r.b)("FriendsHelp.helpOrderList",t).then(function(t){e(t)})})},e.b=function(t){return new l.a(function(e){Object(r.b)("FriendsHelp.changeHelp",t).then(function(t){e(t)})})},e.c=function(t){return new l.a(function(e){Object(r.b)("FriendsHelp.delHelp",t).then(function(t){e(t)})})},e.g=function(t){return new l.a(function(e){Object(r.b)("FriendsHelp.showMarket",t).then(function(t){e(t)})})},e.d=function(t){return new l.a(function(e){Object(r.b)("FriendsHelp.getCourseList",t).then(function(t){e(t)})})};var a=n("rVsN"),l=n.n(a),r=n("60kx")},YGpa:function(t,e){},vvyT:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("4YfN"),l=n.n(a),r=n("EIOx"),i={name:"FriendHelp",data:function(){return{loading:!1,activeName:"helpManage",activeStatusIndex:0,tableDataList:[],dataListPage:null,dataListCurrentPage:1,activeBuyStatusIndex:0,orderList:[],orderListPage:null,orderListCurrentPage:1}},computed:{formatTimestamp:function(){return function(t){var e=new Date(parseInt(t)),n=e.getFullYear(),a=e.getMonth()+1,l=e.getDate(),r=e.getHours(),i=e.getMinutes(),s=e.getSeconds();return a=a<10?"0"+a:a,l=l<10?"0"+l:l,r=r<10?"0"+r:r,i=i<10?"0"+i:i,s=s<10?"0"+s:s,n+"-"+a+"-"+l}},getStatus:function(){return function(t,e){var n=(new Date).getTime();return t>n?"未开始":n>e?"已结束":"进行中"}}},activated:function(){this.loading=!1,this.activeName="helpManage",this.marketList()},methods:{addFriendHelp:function(){var t=this;this.$checkpower().then(function(){t.$router.push({name:"FriendHelpAdd"})})},handleClick:function(t,e){"helpManage"==this.activeName?this.marketList():"helpOrder"==this.activeName&&this.getHelpOrderList()},showStatusList:function(t){"helpManage"==this.activeName&&(this.activeStatusIndex=t,this.marketList({status:t}))},showBuyStatusList:function(t){"helpOrder"==this.activeName&&(this.activeBuyStatusIndex=t,this.getHelpOrderList({is_buy:t}))},changeStatus:function(t){Object(r.b)({id:t}).then(function(t){})},handleDelHelp:function(t){var e=this;Object(r.c)({id:t}).then(function(t){(t.result="success")&&e.marketList({status:e.activeStatusIndex})})},dataListHandleCurrentChange:function(t){this.dataListCurrentPage=t,this.marketList({p:t})},orderListHandleCurrentChange:function(t){this.orderListCurrentPage=t,this.getHelpOrderList({p:t})},marketList:function(t){var e=this;Object(r.f)(l()({},{state:"",p:1,maxperpage:10},t)).then(function(t){e.tableDataList=t.list,e.dataListPage=t.page,e.loading=!0})},getHelpOrderList:function(t){var e=this;Object(r.e)(l()({},{is_buy:"",p:1,maxperpage:10},t)).then(function(t){e.orderList=t.list,e.orderListPage=t.page})}}},s={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.loading?n("ks-container",[n("ks-title",{attrs:{name:"好友助力",border:"none"}}),t._v(" "),n("div",{staticClass:"help-con"},[n("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"好友助力管理",name:"helpManage"}},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableDataList,"tooltip-effect":"dark"}},[n("el-table-column",{attrs:{prop:"title",label:"活动名称",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{label:"活动时间",align:"center","min-width":"170"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(t.formatTimestamp(1e3*e.row.starttime))+"-"+t._s(t.formatTimestamp(1e3*e.row.endtime)))])]}}],null,!1,2275698121)}),t._v(" "),n("el-table-column",{attrs:{prop:"num",label:"助力人数",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{label:"活动商品",align:"center","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-dropdown",{attrs:{placement:"bottom"}},[n("span",{staticClass:"el-dropdown-link"},[t._v("\n                  "+t._s(e.row.json.length)+" 门课程\n                  "),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(e.row.json,function(e,a){return n("el-dropdown-item",{key:a},[t._v(t._s(e.title))])}),1)],1)]}}],null,!1,2323078504)}),t._v(" "),n("el-table-column",{attrs:{prop:"discount",label:"折扣/免费",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{label:"完成任务人数",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.finishnum)+"/"+t._s(e.row.initiatenum))])]}}],null,!1,3783225972)}),t._v(" "),n("el-table-column",{attrs:{prop:"helpnum",label:"参与助力人数",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{label:"状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(t.getStatus(e.row.starttime,1e3*e.row.endtime)))])]}}],null,!1,3570738317)}),t._v(" "),n("el-table-column",{attrs:{label:"上架",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-switch",{attrs:{"active-value":"1","inactive-value":"0","active-color":"#13ce66"},on:{change:function(n){return t.changeStatus(e.row.id)}},model:{value:e.row.status,callback:function(n){t.$set(e.row,"status",n)},expression:"scope.row.status"}})]}}],null,!1,4269351770)}),t._v(" "),n("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-dropdown",{attrs:{trigger:"click",placement:"bottom"}},[n("span",{staticClass:"table-operation"},[t._v("...")]),t._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("router-link",{attrs:{to:"/friendhelp/add?id="+e.row.id}},[n("el-dropdown-item",[t._v("编辑")])],1),t._v(" "),n("span",{on:{click:function(n){return t.handleDelHelp(e.row.id)}}},[n("el-dropdown-item",[t._v("删除")])],1)],1)],1)]}}],null,!1,3302096457)})],1),t._v(" "),n("el-pagination",{staticClass:"table-page",attrs:{background:"",layout:"prev, pager, next",total:+t.dataListPage.totalput},on:{"current-change":t.dataListHandleCurrentChange}})],1),t._v(" "),n("el-tab-pane",{attrs:{label:"好友助力订单",name:"helpOrder"}},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.orderList,"tooltip-effect":"dark"}},[n("el-table-column",{attrs:{prop:"userid",label:"用户ID",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{prop:"username",label:"用户昵称",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{prop:"mobile",label:"手机号",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{prop:"title",label:"助力商品",align:"center","min-width":"220"}}),t._v(" "),n("el-table-column",{attrs:{label:"助力情况",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.count)+"/"+t._s(e.row.num))])]}}],null,!1,1265302225)}),t._v(" "),n("el-table-column",{attrs:{prop:"discount",label:"折扣/免费",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{label:"折扣后是否有购买",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(0==e.row.is_buy?"否":"是"))])]}}],null,!1,49366513)}),t._v(" "),n("el-table-column",{attrs:{label:"助力时间",align:"center","min-width":"170"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.starttime?n("span",[t._v(t._s(t.formatTimestamp(1e3*e.row.starttime))+"-"+t._s(t.formatTimestamp(1e3*e.row.endtime)))]):n("span",[t._v(" ")])]}}],null,!1,1484346635)}),t._v(" "),n("el-table-column",{attrs:{label:"IP",align:"center","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.ip))])]}}],null,!1,2062939359)})],1),t._v(" "),t.orderListPage?n("el-pagination",{staticClass:"table-page",attrs:{background:"",layout:"prev, pager, next",total:+t.orderListPage.totalput},on:{"current-change":t.orderListHandleCurrentChange}}):t._e()],1)],1),t._v(" "),n("div",{staticClass:"help-con-addhelp"},[n("el-popover",{attrs:{placement:"bottom",width:"200",trigger:"click"}},["helpManage"==t.activeName?n("div",[n("span",[t._v("状态 :")]),t._v(" "),n("span",{class:0==t.activeStatusIndex?"active-status":"",on:{click:function(e){return t.showStatusList(0)}}},[t._v("不限")]),t._v(" "),n("span",{class:1==t.activeStatusIndex?"active-status":"",on:{click:function(e){return t.showStatusList(1)}}},[t._v("已上架")]),t._v(" "),n("span",{class:2==t.activeStatusIndex?"active-status":"",on:{click:function(e){return t.showStatusList(2)}}},[t._v("未上架")])]):"helpOrder"==t.activeName?n("div",[n("span",[t._v("状态 :")]),t._v(" "),n("span",{class:0==t.activeBuyStatusIndex?"active-status":"",on:{click:function(e){return t.showBuyStatusList(0)}}},[t._v("不限")]),t._v(" "),n("span",{class:1==t.activeBuyStatusIndex?"active-status":"",on:{click:function(e){return t.showBuyStatusList(1)}}},[t._v("已购买")]),t._v(" "),n("span",{class:2==t.activeBuyStatusIndex?"active-status":"",on:{click:function(e){return t.showBuyStatusList(2)}}},[t._v("未购买")])]):t._e(),t._v(" "),n("el-button",{attrs:{slot:"reference",type:"primary",icon:"iconfont icon-filter",size:"small"},slot:"reference"})],1),t._v(" "),n("el-button",{attrs:{type:"primary",icon:"iconfont icon-plus",size:"small"},on:{click:t.addFriendHelp}},[t._v("添加好友助力")])],1)],1)],1):t._e()},staticRenderFns:[]};var o=n("C7Lr")(i,s,!1,function(t){n("YGpa")},"data-v-686d7eda",null);e.default=o.exports}});