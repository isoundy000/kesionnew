webpackJsonp([13],{"9r/T":function(e,t,n){(function(e){var s=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function a(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new a(i.call(setTimeout,s,arguments),clearTimeout)},t.setInterval=function(){return new a(i.call(setInterval,s,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(s,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n("AYvJ"),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(t,n("9AUj"))},AYvJ:function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var s,i,a,o,c,r=1,l={},d=!1,u=e.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(e);f=f&&f.setTimeout?f:e,"[object process]"==={}.toString.call(e.process)?s=function(e){t.nextTick(function(){p(e)})}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((a=new MessageChannel).port1.onmessage=function(e){p(e.data)},s=function(e){a.port2.postMessage(e)}):u&&"onreadystatechange"in u.createElement("script")?(i=u.documentElement,s=function(e){var t=u.createElement("script");t.onreadystatechange=function(){p(e),t.onreadystatechange=null,i.removeChild(t),t=null},i.appendChild(t)}):s=function(e){setTimeout(p,0,e)}:(o="setImmediate$"+Math.random()+"$",c=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(o)&&p(+t.data.slice(o.length))},e.addEventListener?e.addEventListener("message",c,!1):e.attachEvent("onmessage",c),s=function(t){e.postMessage(o+t,"*")}),f.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return l[r]=i,s(r),r++},f.clearImmediate=m}function m(e){delete l[e]}function p(e){if(d)setTimeout(p,0,e);else{var t=l[e];if(t){d=!0;try{!function(e){var t=e.callback,s=e.args;switch(s.length){case 0:t();break;case 1:t(s[0]);break;case 2:t(s[0],s[1]);break;case 3:t(s[0],s[1],s[2]);break;default:t.apply(n,s)}}(t)}finally{m(e),d=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(t,n("9AUj"),n("V0EG"))},PcE7:function(e,t){},a5sL:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("a3Yh"),i=n.n(s),a=n("rVsN"),o=n.n(a),c=n("60kx");function r(e){return new o.a(function(t){Object(c.b)("Social.addReply",e).then(function(e){t(e)})})}var l=n("9r/T"),d={components:{MediaPreview:n("gEVN").a},data:function(){var e;return e={replyID:0,comidd:0,textarea:"",friendsDet:{json:{}},friendsList:"",show:!0,is_comment:Boolean,uid:"",comid:"",placeholder:"请输入评论内容",list_show:!1},i()(e,"comid",Number),i()(e,"flag",!1),i()(e,"reply_userid",""),i()(e,"replyflag",!0),i()(e,"userID",""),i()(e,"replymsg",""),e},created:function(){this.getfriendsDet()},methods:{getfriendsDet:function(){var e,t=this,n=location.hash.split("/").length-1,s=location.hash.split("/")[n];this.$store.ready(function(e){t.userID=e.userInfo.userid}),(e={id:s},new o.a(function(t){Object(c.b)("Social.getFriendsDetail",e).then(function(e){t(e)})})).then(function(e){t.friendsDet=e.detail,t.friendsList=e.list,t.resetJson(t.friendsDet.json)})},goback:function(){this.$router.go(-1)},dianzan:function(e){var t,n=this;(t={id:e},new o.a(function(e){Object(c.b)("Social.zan",t).then(function(t){e(t)})})).then(function(e){n.getfriendsDet()})},comment:function(){this.placeholder="请输入评论内容",this.is_comment=!0,this.$refs.foot.scrollIntoView(!0)},reply:function(e,t,n){this.comidd=e,this.replyflag=!0,this.placeholder="回复 ："+n,this.comid=e,this.uid=t,this.is_comment=!1},send:function(){var e=this;r({socialid:this.friendsDet.id,content:this.textarea}).then(function(t){e.$message({message:"评论成功",type:"success"}),e.textarea="",e.getfriendsDet()})},del:function(e,t){var n=this;this.$store.ready(function(s){var i=s.userInfo.usertype,a=s.userInfo.userid;if(!(i>0||t===a))return n.$message({message:"您没有权限",type:"error"});n.$confirm("确认删除吗？该操作不可逆",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var s;(s={type:e,id:t},new o.a(function(e){Object(c.b)("Social.del",s).then(function(t){e(t)})})).then(function(t){1==e?(n.$message({type:"success",message:"删除成功!"}),Object(l.setTimeout)(function(){n.$router.go(-1)},1e3)):(n.$message({type:"success",message:"删除成功!"}),n.getfriendsDet())})})})},deltopic:function(){this.del(1,this.friendsDet.id)},delcom:function(e){this.del(2,e)},delreply:function(e){this.del(2,e)},resetJson:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};switch(e.$info={},Number(e.type)){case 1:e.$type="image";var t=[];e.info instanceof Array&&e.info.map(function(e){t.push({src:e})}),e.$info={list:t};break;case 2:e.$type="video",e.$info={src:e.info[0]||""};break;case 3:e.$type="audio",e.$info={src:e.info[0]||""}}},replyreply:function(e,t,n,s){this.replyID=s,this.comid=n,this.is_comment=!1,this.replyflag=!1,this.replyid=t,this.placeholder="回复："+e,this.reply_userid=t,this.flag=!0},reply_send:function(){var e=this;r({socialid:this.friendsDet.id,content:this.replymsg,reply_uid:this.uid,parentid:this.comid}).then(function(t){e.$message({message:"回复成功",type:"success"}),e.replymsg="",e.getfriendsDet(),e.comidd=0})},reply_sends:function(){var e=this;r({socialid:this.friendsDet.id,content:this.replymsg,reply_uid:this.reply_userid,parentid:this.comid}).then(function(t){e.$message({message:"回复成功",type:"success"}),e.replymsg="",e.getfriendsDet(),e.replyID=0})}},watch:{$route:function(e,t){this.$router.go(0)}}},u={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("div",{staticClass:"nav"},[n("el-breadcrumb",{staticClass:"navbar",attrs:{separator:"/"}},[n("el-breadcrumb-item",{staticClass:"nav-friend",attrs:{to:{path:"/?url=%2Fhome.html%2Ffriends%2FIndex%2FIndex%3F"}}},[e._v("朋友圈动态")]),e._v(" "),n("el-breadcrumb-item",[e._v("查看动态")])],1),e._v(" "),n("el-button",{staticClass:"goback",on:{click:e.goback}},[e._v("返回")])],1),e._v(" "),n("div",{staticClass:"content"},[n("div",{staticClass:"content-nav"},[n("ks-image",{staticClass:"content-nav__head",attrs:{src:e.friendsDet.head}}),e._v(" "),n("span",{staticClass:"content-nav__name"},[e._v(e._s(e.friendsDet.name))]),e._v(" "),n("span",{staticClass:"content-nav__time"},[e._v(e._s(e.friendsDet.adddate))])],1),e._v(" "),n("div",{staticClass:"content-con"},[n("div",{staticClass:"content-con__head"},[e._v(e._s(e.friendsDet.json.content))]),e._v(" "),n("div",{staticClass:"content-con__image"},[n("media-Preview",{staticClass:"Preview",attrs:{type:e.friendsDet.json.$type,info:e.friendsDet.json.$info}})],1),e._v(" "),n("div",{staticClass:"content-con__footer"},[n("span",{staticClass:"icon_zan",on:{click:function(t){return e.dianzan(e.friendsDet.id)}}},[e.friendsDet.is_zan?n("i",{staticClass:"iconfont icon-dianzan"}):n("i",{staticClass:"iconfont icon-dianzan-outline"}),e._v("\n          "+e._s(e.friendsDet.zan_num)+"\n        ")]),e._v(" "),n("span",{staticClass:"is_relpy",on:{click:e.comment}},[n("i",{staticClass:"iconfont icon-message-circle-outline"}),e._v("\n          "+e._s(e.friendsDet.reply_num)+"\n        ")]),e._v(" "),n("i",{staticClass:"iconfont icon-shanchu1 del",on:{click:function(t){return e.deltopic()}}})])]),e._v(" "),e._l(e.friendsList,function(t,s){return n("div",{directives:[{name:"show",rawName:"v-show",value:s<4||e.list_show,expression:"i < 4 || list_show"}],key:t.id,staticClass:"comment"},[n("ks-image",{staticClass:"content-nav__head",attrs:{type:"user",src:t.head}}),e._v(" "),n("span",{staticClass:"content-nav__name"},[e._v(e._s(t.name))]),e._v(" "),n("span",{staticClass:"content-nav__time"},[e._v(e._s(t.adddate))]),e._v(" "),n("div",{staticClass:"comment-con"},[e._v(e._s(t.json))]),e._v(" "),n("div",{staticClass:"comment-footer"},[t.userid!==e.userID?n("span",{on:{click:function(n){return e.reply(t.id,t.userid,t.name)}}},[e._v("回复")]):e._e(),e._v(" "),n("i",{staticClass:"iconfont icon-shanchu1 del replydel",on:{click:function(n){return e.delcom(t.id)}}}),e._v(" "),e.comidd==t.id?n("div",[n("el-input",{attrs:{placeholder:e.placeholder},model:{value:e.replymsg,callback:function(t){e.replymsg=t},expression:"replymsg"}}),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.reply_send}},[e._v("发送")])],1):e._e()]),e._v(" "),e._l(t.reply_list,function(s,i){return n("div",{key:s.id,staticClass:"reply"},[n("ks-image",{staticClass:"content-nav__head",attrs:{type:"user",src:s.head}}),e._v(" "),n("span",{staticClass:"content-nav__name--reply"},[n("span",[e._v(e._s(s.name))]),e._v("回复\n          "),n("span",[e._v(e._s(s.reply_name))])]),e._v(" "),n("span",{staticClass:"content-nav__time--reply"},[e._v(e._s(s.adddate))]),e._v(" "),n("i",{staticClass:"iconfont icon-shanchu1 del del-reply",on:{click:function(t){return e.delreply(s.id)}}}),e._v(" "),n("div",{staticClass:"reply-content"},[e._v(e._s(s.json))]),e._v(" "),s.userid!==e.userID?n("span",{staticClass:"reply-reply",on:{click:function(n){return e.replyreply(s.name,s.userid,t.id,s.id)}}},[e._v("回复")]):e._e(),e._v(" "),e.replyID==s.id?n("div",{staticClass:"el_input"},[n("el-input",{attrs:{placeholder:e.placeholder},model:{value:e.replymsg,callback:function(t){e.replymsg=t},expression:"replymsg"}}),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.reply_sends}},[e._v("发送")])],1):e._e(),e._v(" "),i<t.reply_list.length-1?n("div",{staticClass:"gridClass"}):e._e()],1)}),e._v(" "),s<e.friendsList.length-1?n("div",{staticClass:"gridClass gridClasss"}):e._e()],2)})],2),e._v(" "),n("div",{ref:"foot",staticClass:"footer"},[n("div",{staticClass:"footer-content"},[n("el-input",{staticClass:"footer-reply",attrs:{placeholder:"请输入评论内容","show-word-limit":e.show,resize:"none",type:"textarea",rows:10},model:{value:e.textarea,callback:function(t){e.textarea=t},expression:"textarea"}})],1),e._v(" "),n("el-button",{staticClass:"footer-button",attrs:{type:"primary"},on:{click:e.send}},[e._v("发表评论")]),e._v(" "),n("div",{staticClass:"gridClass footergrid"}),e._v(" "),e.friendsList.length>4?n("div",[e.list_show?n("el-button",{staticClass:"footer-button__load"},[e._v("数据显示完毕")]):n("el-button",{staticClass:"footer-button__load",on:{click:function(t){e.list_show=!e.list_show}}},[e._v("加载回复更多")])],1):e._e()],1)])},staticRenderFns:[]};var f=n("C7Lr")(d,u,!1,function(e){n("PcE7")},"data-v-923bf928",null);t.default=f.exports}});