webpackJsonp([26],{IO18:function(t,e){},qOq9:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.list?i("div",{staticClass:"material-item",on:{click:function(e){return t.$emit("click")}}},[t._t("prepend"),t._v(" "),t._l(t.list,function(e,a){return i("div",{key:e.id,class:0===a?"material-item__first_child":"material-item__child"},[i("ks-create-bg",0===a?{attrs:{ratio:9/16,src:e.thumb_url}}:{attrs:{src:e.thumb_url}}),t._v(" "),i("div",{class:0===a?"material-item__first_child__title":"material-item__child__title"},[i("span",[t._v(t._s(e.title))])])],1)})],2):t._e()},staticRenderFns:[]};var s=i("C7Lr")({name:"MaterialItem",props:["list"]},a,!1,function(t){i("rngs")},"data-v-7e35f212",null).exports,n=i("0xDb"),r=i("FJ1s"),l={name:"MaterialList",data:function(){return{keyword:"",pagination:{total:0,current:0},loaded:!1,list:[]}},methods:{getMaterialList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.loaded=!1,this.$showLoading(),Object(r.v)({page:e,maxperpage:12,keyword:this.keyword}).then(function(e){"success"===e.result&&(Object(n.d)(e.item,function(t){t.checked=!1}),t.list=e.item,t.pagination.total=e.page.total_pages,t.pagination.current=e.page.now_page),t.loaded=!0,t.$hideLoading()})},updateWechatMater:function(){var t=this;Object(r.u)().then(function(e){var i=Math.ceil(e.count.news_count/10);t.synchroMater(10,0,i,1)})},synchroMater:function(t,e,i,a){var s=this;Object(r.r)({offset:e,count:t}).then(function(n){a<i?(s.$showProgress("正在更新",Math.ceil(100/i*a)),s.synchroMater(t,e+t,i,a+1)):(s.$showProgress("更新完成",100),setTimeout(function(){s.$hideProgress(),s.getMaterialList()},500))})},edit:function(t){location.href="/home.html/wechat/Index/tuWen/"+t+"?appid-23"},open:function(t){location.href=t},deleteMaterial:function(t){var e=this;this.$confirm("此操作将永久删除该素材, 是否继续?","提示",{type:"warning"}).then(function(){Object(r.d)({id:t}).then(function(t){"success"===t.result?(e.$msg("删除成功","success"),e.getMaterialList()):e.$msg(t.result)})})}},mounted:function(){this.getMaterialList()},components:{MaterialItem:s}},c={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ks-pt30"},[i("div",{staticClass:"clearfix"},[i("el-input",{staticClass:"ks-max-w-fit ks-fl",attrs:{placeholder:"请输入搜索内容"},on:{change:function(e){return t.getMaterialList()}},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}},[i("i",{staticClass:"el-icon-search el-input__icon ks-cursor-pointer",attrs:{slot:"suffix"},on:{click:function(e){return t.getMaterialList()}},slot:"suffix"})]),t._v(" "),i("div",{staticClass:"ks-fr"},[i("el-button",{attrs:{type:"primary"},on:{click:t.updateWechatMater}},[t._v("从微信更新素材")])],1)],1),t._v(" "),t.list.length?i("el-row",{directives:[{name:"masonry",rawName:"v-masonry"}],staticClass:"material-list",attrs:{"item-selector":".material-list__col",gutter:20}},t._l(t.list,function(e){return i("el-col",{directives:[{name:"masonry-tile",rawName:"v-masonry-tile"}],key:e.id,staticClass:"material-list__col",attrs:{span:6}},[i("div",{staticClass:"material-list__item"},[i("material-item",{attrs:{list:e.list},on:{click:function(i){return t.selectMaterialItem(e)}}}),t._v(" "),i("div",{staticClass:"material-list__update_time"},[t._v("更新于"+t._s(e.update_time))]),t._v(" "),i("el-row",{staticClass:"material-list__operate"},[i("el-col",{attrs:{span:12}},[i("el-checkbox",{model:{value:e.checked,callback:function(i){t.$set(e,"checked",i)},expression:"item.checked"}},[t._v("选择")])],1),t._v(" "),i("el-col",{attrs:{span:12}},[i("el-tooltip",{attrs:{effect:"dark",content:"删除",placement:"top"}},[i("i",{staticClass:"iconfont icon-shanchu1 ks-fz18",on:{click:function(i){return t.deleteMaterial(e.id)}}})])],1)],1)],1)])}),1):!t.list.length&&t.loaded?i("div",{staticClass:"ks-empty"},[t._v("没有找到任何数据")]):t._e(),t._v(" "),i("div",{staticClass:"material-list__footer"},[t.list.length?i("ks-table-footer",{attrs:{pagination:t.pagination,"table-data":t.list},on:{"current-change":t.getMaterialList,trigger:t.deleteMaterial}}):t._e()],1)],1)},staticRenderFns:[]};var o=i("C7Lr")(l,c,!1,function(t){i("IO18")},"data-v-02e800bf",null);e.default=o.exports},rngs:function(t,e){}});