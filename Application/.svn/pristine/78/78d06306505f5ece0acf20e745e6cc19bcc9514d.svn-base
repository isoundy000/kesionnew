webpackJsonp([51],{cw3K:function(t,e){},rHVY:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("0xDb"),i=a("Llv5"),l={name:"StoreSetup",data:function(){return{activeName:"base",server:"",serveroptions:[{label:"53快服",value:"53kf"}],openHeadTeacher:!1,formLoaded:!1,form:{},showPC:!1,tableData:[],pcTableData:[],mrimTableData:[],introForm:{intro:this.$store.state.info.intro},shareForm:{},rules:{sitename:[{required:!0,message:"请输入店铺名称"}]},shareRules:{sharetitle:[{required:!0,message:"请输入分享标题"}]}}},methods:{onSubmit:function(){var t=this;this.$refs.baseInfoForm.validate(function(e){if(e){if(!t.form.logo)return t.$msg("请先选择logo"),!1;if(t.form.isattention&&!t.form.weixinqr)return t.$msg("请先选择二维码"),!1;Object(i.g)(t.form).then(function(e){"success"===e.result&&(t.$msg("保存成功","success"),t.$store.dispatch("updateStoreState"))})}})},onIntroSubmit:function(){var t=this;Object(i.h)(this.introForm).then(function(e){"success"===e.result&&t.$msg("保存成功","success")})},saveBanner:function(t){var e=this;"pc"===t?Object(i.f)(this.pcTableData).then(function(t){"success"===t.result&&e.$msg("保存成功","success")}):"mrim"===t?Object(i.d)(this.mrimTableData).then(function(t){"success"==t.result&&e.$msg("保存成功","success")}):Object(i.e)(this.tableData).then(function(t){"success"===t.result&&e.$msg("保存成功","success")})},deleteBanner:function(t,e){if("pc"===e){var a=Object(s.c)(this.pcTableData,t);this.pcTableData=a}else if("mrim"===e){var i=Object(s.c)(this.mrimTableData,t);this.mrimTableData=i}else{var l=Object(s.c)(this.tableData,t);this.tableData=l}},addBanner:function(t){"pc"===t?this.pcTableData.push({img:"/Public/app/images/cover_default.png",url:"",title:""}):"mrim"===t?this.mrimTableData.push({img:"/Public/app/images/cover_default.png",url:"",title:""}):this.tableData.push({img:"/Public/app/images/cover_default.png",url:"",title:""})},moveUp:function(t,e){var a=this,i=new Array;"pc"===e?(Object(s.d)(this.pcTableData,function(e,s){s===t-1&&i.push(a.pcTableData[t]),s!==t&&i.push(e)}),this.pcTableData=i):"mrim"===e?(Object(s.d)(this.mrimTableData,function(e,s){s===t-1&&i.push(a.mrimTableData[t]),s!==t&&i.push(e)}),this.mrimTableData=i):(Object(s.d)(this.tableData,function(e,s){s===t-1&&i.push(a.tableData[t]),s!==t&&i.push(e)}),this.tableData=i)},moveDown:function(t,e){var a=this,i=new Array;"pc"===e?Object(s.d)(this.pcTableData,function(e,s){s!==t&&i.push(e),s===t+1&&i.push(a.pcTableData[t])}):"mrim"===e?(Object(s.d)(this.mrimTableData,function(e,s){s!==t&&i.push(e),s===t+1&&i.push(a.mrimTableData[t])}),this.mrimTableData=i):(Object(s.d)(this.tableData,function(e,s){s!==t&&i.push(e),s===t+1&&i.push(a.tableData[t])}),this.tableData=i)},saveShare:function(){var t=this;this.$refs.shareForm.validate(function(e){e&&Object(i.i)(t.shareForm).then(function(e){"success"===e.result&&(t.$msg("保存成功","success"),t.$store.dispatch("updateStoreState"))})})}},mounted:function(){var t=this;this.$showLoading(),this.getMenuAuthorityByKey("pc_store").then(function(e){e.key&&(t.showPC=!0)}),this.$store.ready(function(e){t.form={sitename:e.info.sitename,address:e.info.address,logo:e.info.logo,tel:e.info.tel,isattention:1==e.info.isattention,weixinqr:e.info.weixinqr,service_type:e.info.json.service_type||"",service_url:e.info.json.service_url||"",teacher_wechat_code:e.info.json.teacher_wechat_code,teacher_wechat:e.info.json.teacher_wechat},t.shareForm={sharetitle:e.info.sharetitle,sharepic:e.info.sharepic,sharedesc:e.info.sharedesc},t.formLoaded=!0,t.$hideLoading()}),Object(i.b)([{act:"appCarousel",callKeyName:"carousel"},{act:"appPcCarousel",callKeyName:"pcCarousel"},{act:"appTeCarousel",callKeyName:"mrimCarousel"}]).then(function(e){t.pcTableData=e.pcCarousel.list,t.tableData=e.carousel.list,t.mrimTableData=e.mrimCarousel.list})}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("ks-container",[a("ks-title",{attrs:{name:"店铺设置",border:"none"}}),t._v(" "),a("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"基本信息",name:"base"}},[t.formLoaded?a("el-form",{ref:"baseInfoForm",attrs:{rules:t.rules,model:t.form,"label-width":"140px"}},[a("el-form-item",{attrs:{label:"店铺名称",prop:"sitename",required:""}},[a("el-input",{model:{value:t.form.sitename,callback:function(e){t.$set(t.form,"sitename",e)},expression:"form.sitename"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"店铺logo",required:""}},[a("ks-create-bg",{staticClass:"logo",attrs:{type:"logo",src:t.form.logo}}),t._v(" "),a("el-button",{staticClass:"ks-mt20 ks-red-btn",on:{click:function(e){return t.$uploadImages(t.form,"logo")}}},[t._v("上传图片")]),t._v(" "),a("div",{staticClass:"ks-tips ks-mt15"},[t._v("限制：2MB，支持jpg|png|gif\n              "),a("br"),t._v("图片建议比例 1:1\n            ")])],1),t._v(" "),a("el-form-item",{attrs:{label:"联系地址"}},[a("el-input",{model:{value:t.form.address,callback:function(e){t.$set(t.form,"address",e)},expression:"form.address"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"联系电话"}},[a("el-input",{model:{value:t.form.tel,callback:function(e){t.$set(t.form,"tel",e)},expression:"form.tel"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"关注公众号"}},[a("el-switch",{attrs:{"active-color":t.$store.state.switch_on,"inactive-color":t.$store.state.switch_off},model:{value:t.form.isattention,callback:function(e){t.$set(t.form,"isattention",e)},expression:"form.isattention"}})],1),t._v(" "),t.form.isattention?a("el-form-item",{attrs:{label:"公众号二维码"}},[a("ks-create-bg",{staticClass:"logo",attrs:{type:"logo",src:t.form.weixinqr}}),t._v(" "),a("el-button",{staticClass:"ks-mt20 ks-red-btn",on:{click:function(e){return t.$uploadImages(t.form,"weixinqr")}}},[t._v("上传图片")]),t._v(" "),a("div",{staticClass:"ks-tips ks-mt15"},[t._v("限制：2MB，支持jpg|png|gif\n              "),a("br"),t._v("图片建议比例 1:1\n            ")])],1):t._e(),t._v(" "),a("el-form-item",{attrs:{label:"班主任微信号"}},[a("el-input",{model:{value:t.form.teacher_wechat,callback:function(e){t.$set(t.form,"teacher_wechat",e)},expression:"form.teacher_wechat"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"班主任微信二维码"}},[a("ks-create-bg",{staticClass:"logo",attrs:{type:"logo",src:t.form.teacher_wechat_code}}),t._v(" "),a("el-button",{staticClass:"ks-mt20 ks-red-btn",on:{click:function(e){return t.$uploadImages(t.form,"teacher_wechat_code")}}},[t._v("上传图片")]),t._v(" "),a("div",{staticClass:"ks-tips ks-mt15"},[t._v("限制：2MB，支持jpg|png|gif\n              "),a("br"),t._v("图片建议比例 1:1\n            ")])],1),t._v(" "),a("el-form-item",{attrs:{label:"网站客服"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.service_type,callback:function(e){t.$set(t.form,"service_type",e)},expression:"form.service_type"}},t._l(t.serveroptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"53kf"==t.form.service_type,expression:"form.service_type == '53kf'"}],attrs:{label:"客服脚本地址"}},[a("el-input",{attrs:{placeholder:"请输入脚本地址"},model:{value:t.form.service_url,callback:function(e){t.$set(t.form,"service_url",e)},expression:"form.service_url"}},[a("template",{slot:"prepend"},[t._v("https://tb.53kf.com/")])],2)],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.onSubmit()}}},[t._v("保存设置")]),t._v(" "),a("el-button",[t._v("取消")])],1)],1):t._e()],1),t._v(" "),a("el-tab-pane",{attrs:{label:"公众号轮播图设置",name:"banner"}},[a("div",{staticClass:"ks-tips"},[t._v("提示：用于设置微信公众号与小程序的轮播图")]),t._v(" "),a("div",{staticClass:"ks-tips"},[a("i",[t._v("*")]),t._v("轮播图设置（图片建议比例 16：9）\n        ")]),t._v(" "),a("el-table",{staticClass:"ks-mt20",attrs:{data:t.tableData}},[a("el-table-column",{attrs:{label:"图片",width:"260"},scopedSlots:t._u([{key:"default",fn:function(e){return a("ks-create-bg",{staticClass:"banner",attrs:{src:e.row.img}},[a("div",{staticClass:"masked",on:{click:function(a){return t.$uploadImages(e.row,"img")}}},[t._v("点击修改图片")])])}}])}),t._v(" "),a("el-table-column",{attrs:{label:"设置连接"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"ks-link"},[e.row.title?a("el-input",{staticClass:"ks-fl ks-link-input",attrs:{disabled:!0}}):a("el-input",{staticClass:"ks-fl ks-link-input",model:{value:e.row.url,callback:function(a){t.$set(e.row,"url",a)},expression:"scope.row.url"}}),t._v(" "),e.row.title?a("div",{staticClass:"ks-link-title"},[a("i",{staticClass:"el-icon-close",on:{click:function(t){e.row.title="",e.row.url=""}}}),t._v("\n                  "+t._s(e.row.title)+"\n                ")]):t._e()],1),t._v(" "),a("el-button",{staticClass:"ks-ml10",on:{click:function(a){return t.$selectLink(e.row)}}},[t._v("设置链接")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return a("div",{staticClass:"operat-icon"},[e.$index>0?a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"上移",placement:"top"}},[a("i",{staticClass:"iconfont icon-top",on:{click:function(a){return t.moveUp(e.$index)}}})]):t._e(),t._v(" "),t.tableData.length>1?a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"下移",placement:"top"}},[a("i",{staticClass:"iconfont icon-bottom",on:{click:function(a){return t.moveDown(e.$index)}}})]):t._e(),t._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除",placement:"top"}},[a("i",{staticClass:"iconfont icon-shanchu1",on:{click:function(a){return t.deleteBanner(e.$index)}}})])],1)}}])})],1),t._v(" "),a("el-button",{staticClass:"ks-mt20 ks-red-btn",attrs:{icon:"el-icon-plus"},on:{click:t.addBanner}},[t._v("添加banner")]),t._v(" "),a("el-button",{staticClass:"ks-mt20",attrs:{type:"primary"},on:{click:t.saveBanner}},[t._v("保存设置")])],1),t._v(" "),a("el-tab-pane",{attrs:{label:"移动端教辅周边轮播图设置",name:"mrimbanner"}},[a("div",{staticClass:"ks-tips"},[t._v("提示：用于设置移动端教辅周边轮播图")]),t._v(" "),a("div",{staticClass:"ks-tips"},[a("i",[t._v("*")]),t._v("轮播图设置（图片建议尺寸比例 16:9）\n        ")]),t._v(" "),a("el-table",{staticClass:"ks-mt20",attrs:{data:t.mrimTableData}},[a("el-table-column",{attrs:{label:"图片",width:"260"},scopedSlots:t._u([{key:"default",fn:function(e){return a("ks-create-bg",{staticClass:"banner",attrs:{src:e.row.img}},[a("div",{staticClass:"masked",on:{click:function(a){return t.$uploadImages(e.row,"img")}}},[t._v("点击修改图片")])])}}])}),t._v(" "),a("el-table-column",{attrs:{label:"设置连接"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"ks-link"},[e.row.title?a("el-input",{staticClass:"ks-fl ks-link-input",attrs:{disabled:!0}}):a("el-input",{staticClass:"ks-fl ks-link-input",model:{value:e.row.url,callback:function(a){t.$set(e.row,"url",a)},expression:"scope.row.url"}}),t._v(" "),e.row.title?a("div",{staticClass:"ks-link-title"},[a("i",{staticClass:"el-icon-close",on:{click:function(t){e.row.title="",e.row.url=""}}}),t._v("\n                  "+t._s(e.row.title)+"\n                ")]):t._e()],1),t._v(" "),a("el-button",{staticClass:"ks-ml10",on:{click:function(a){return t.$selectLink(e.row)}}},[t._v("设置链接")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return a("div",{staticClass:"operat-icon"},[e.$index>0?a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"上移",placement:"top"}},[a("i",{staticClass:"iconfont icon-top",on:{click:function(a){return t.moveUp(e.$index,"mrim")}}})]):t._e(),t._v(" "),t.mrimTableData.length>1?a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"下移",placement:"top"}},[a("i",{staticClass:"iconfont icon-bottom",on:{click:function(a){return t.moveDown(e.$index,"mrim")}}})]):t._e(),t._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除",placement:"top"}},[a("i",{staticClass:"iconfont icon-shanchu1",on:{click:function(a){return t.deleteBanner(e.$index,"mrim")}}})])],1)}}])})],1),t._v(" "),a("el-button",{staticClass:"ks-mt20 ks-red-btn",attrs:{icon:"el-icon-plus"},on:{click:function(e){return t.addBanner("mrim")}}},[t._v("添加banner")]),t._v(" "),a("el-button",{staticClass:"ks-mt20",attrs:{type:"primary"},on:{click:function(e){return t.saveBanner("mrim")}}},[t._v("保存设置")])],1),t._v(" "),t.showPC?a("el-tab-pane",{attrs:{label:"PC端轮播图设置",name:"pcbanner"}},[a("div",{staticClass:"ks-tips"},[t._v("提示：用于设置PC端轮播图")]),t._v(" "),a("div",{staticClass:"ks-tips"},[a("i",[t._v("*")]),t._v("轮播图设置（图片建议尺寸 1920*420）\n        ")]),t._v(" "),a("el-table",{staticClass:"ks-mt20",attrs:{data:t.pcTableData}},[a("el-table-column",{attrs:{label:"图片",width:"260"},scopedSlots:t._u([{key:"default",fn:function(e){return a("ks-create-bg",{staticClass:"banner",attrs:{src:e.row.img}},[a("div",{staticClass:"masked",on:{click:function(a){return t.$uploadImages(e.row,"img")}}},[t._v("点击修改图片")])])}}],null,!1,3729887875)}),t._v(" "),a("el-table-column",{attrs:{label:"设置连接"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"ks-link"},[e.row.title?a("el-input",{staticClass:"ks-fl ks-link-input",attrs:{disabled:!0}}):a("el-input",{staticClass:"ks-fl ks-link-input",model:{value:e.row.url,callback:function(a){t.$set(e.row,"url",a)},expression:"scope.row.url"}}),t._v(" "),e.row.title?a("div",{staticClass:"ks-link-title"},[a("i",{staticClass:"el-icon-close",on:{click:function(t){e.row.title="",e.row.url=""}}}),t._v("\n                  "+t._s(e.row.title)+"\n                ")]):t._e()],1),t._v(" "),a("el-button",{staticClass:"ks-ml10",on:{click:function(a){return t.$selectLink(e.row)}}},[t._v("设置链接")])]}}],null,!1,3490384436)}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return a("div",{staticClass:"operat-icon"},[e.$index>0?a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"上移",placement:"top"}},[a("i",{staticClass:"iconfont icon-top",on:{click:function(a){return t.moveUp(e.$index,"pc")}}})]):t._e(),t._v(" "),t.pcTableData.length>1?a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"下移",placement:"top"}},[a("i",{staticClass:"iconfont icon-bottom",on:{click:function(a){return t.moveDown(e.$index,"pc")}}})]):t._e(),t._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除",placement:"top"}},[a("i",{staticClass:"iconfont icon-shanchu1",on:{click:function(a){return t.deleteBanner(e.$index,"pc")}}})])],1)}}],null,!1,570864211)})],1),t._v(" "),a("el-button",{staticClass:"ks-mt20 ks-red-btn",attrs:{icon:"el-icon-plus"},on:{click:function(e){return t.addBanner("pc")}}},[t._v("添加banner")]),t._v(" "),a("el-button",{staticClass:"ks-mt20",attrs:{type:"primary"},on:{click:function(e){return t.saveBanner("pc")}}},[t._v("保存设置")])],1):t._e(),t._v(" "),a("el-tab-pane",{attrs:{label:"分享设置",name:"share"}},[a("el-form",{ref:"shareForm",attrs:{rules:t.shareRules,model:t.shareForm,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"分享标题",prop:"sharetitle",required:""}},[a("el-input",{model:{value:t.shareForm.sharetitle,callback:function(e){t.$set(t.shareForm,"sharetitle",e)},expression:"shareForm.sharetitle"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"分享图片"}},[a("ks-create-bg",{staticClass:"logo",attrs:{type:"logo",src:t.shareForm.sharepic}}),t._v(" "),a("el-button",{staticClass:"ks-mt20 ks-red-btn",on:{click:function(e){return t.$uploadImages(t.shareForm,"sharepic")}}},[t._v("上传图片")]),t._v(" "),a("div",{staticClass:"ks-tips"},[t._v("注意：建议比例1:1, 200px * 200px")])],1),t._v(" "),a("el-form-item",{attrs:{label:"店铺简介"}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.shareForm.sharedesc,callback:function(e){t.$set(t.shareForm,"sharedesc",e)},expression:"shareForm.sharedesc"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.saveShare()}}},[t._v("保存设置")])],1)],1)],1),t._v(" "),a("el-tab-pane",{attrs:{label:"店铺介绍",name:"intro"}},[a("el-form",{attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:"店铺介绍",prop:"intro"}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.introForm.intro,callback:function(e){t.$set(t.introForm,"intro",e)},expression:"introForm.intro"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.onIntroSubmit()}}},[t._v("保存设置")])],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var r=a("C7Lr")(l,n,!1,function(t){a("cw3K")},"data-v-213314d7",null);e.default=r.exports}});