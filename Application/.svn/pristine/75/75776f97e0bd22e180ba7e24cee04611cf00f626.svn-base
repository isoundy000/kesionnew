webpackJsonp([10],{A0cS:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=r("ZLEe"),a=r.n(s),i=r("lC5x"),n=r.n(i),c=r("J0Oq"),u=r.n(c),o=r("ofAU"),l={data:function(){return{add:-1,relevance:{},activenum:"0",backImg:"/Public/app/images/certificate_bg1.png",bgimg:[{url:"/Public/app/images/certificate_bg1.png",id:1},{url:"/Public/app/images/certificate_bg2.png",id:2},{url:"/Public/app/images/certificate_bg3.png",id:3},{url:"/Public/app/images/certificate_bg4.png",id:4},{url:"/Public/app/images/certificate_bg5.png",id:5}],handleFlag:!1,compileIndex:"",flag:!1,value:!0,ruleForm:{imgurl:"",score:"",title:"",sharepic:"",num_start:"",num_end:"",comment:"",share:"",qrcode:"",infoid:"",remarkcontent:""},remarkMsg:[]}},methods:{active:function(t,e){if(t>=0)this.backImg=e.url;else{if(!this.ruleForm.imgurl)return this.$message.error("请先上传图片");this.backImg=this.ruleForm.imgurl}this.activenum=t},addremark:function(){this.flag=!0,this.handleFlag=!0,this.add=-1},cancel:function(){this.flag=!1,this.clearnmsg()},clearnmsg:function(){this.ruleForm.num_start="",this.ruleForm.num_end="",this.ruleForm.comment=""},saveRemark:function(){var t=this,e=this.ruleForm,r=!0;if(!e.num_start||!e.num_end)return this.$message.error("请填写得分范围");if(!e.comment)return this.$message.error("请填写点评内容");if(Number(e.num_start)>Number(e.num_end))return this.$message.error("下限分数必须小于上限分数，请检查");if(-1==this.add?this.remarkMsg.map(function(t){(Number(e.num_start)>=Number(t.num_start)&&Number(e.num_start)<=Number(t.num_end)||Number(e.num_end)>=Number(t.num_start)&&Number(e.num_end)<=Number(t.num_end))&&(r=!1)}):this.remarkMsg.map(function(s,a){a!=t.add&&(Number(e.num_start)>=Number(s.num_start)&&Number(e.num_start)<=Number(s.num_end)||Number(e.num_end)>=Number(s.num_start)&&Number(e.num_end)<=Number(s.num_end))&&(r=!1)}),!r)return this.$message.error("得分范围有重合，请检查");var s={num_start:e.num_start,num_end:e.num_end,comment:e.comment};this.handleFlag?this.remarkMsg.push(s):(this.remarkMsg[this.compileIndex].num_start=this.ruleForm.num_start,this.remarkMsg[this.compileIndex].num_end=this.ruleForm.num_end,this.remarkMsg[this.compileIndex].comment=this.ruleForm.comment),this.clearnmsg(),this.flag=!1},delremark:function(t){this.remarkMsg.splice(t,1)},compileRemark:function(t,e){this.add=e,this.compileIndex=e,this.handleFlag=!1,this.flag=!0,this.ruleForm.num_start=t.num_start,this.ruleForm.num_end=t.num_end,this.ruleForm.comment=t.comment},getCertificateMsg:function(){var t=this;return u()(n.a.mark(function e(){var s,a,i;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.ruleForm,e.next=3,Object(o.e)({id:t.$route.query.id});case 3:a=e.sent,i=a.msg,s.title=i.title,s.imgurl=i.cover,s.score=i.sumscore,t.remarkMsg=i.json,s.qrcode=i.qrcode,s.share=i.share_title,s.infoid=i.infoid,i.cover?t.activenum=-1:t.activenum=0,-1==t.activenum?t.backImg=i.cover:t.backImg=r("avkh"),t.value=1==i.status,t.getlink();case 16:case"end":return e.stop()}},e,t)}))()},getlink:function(){var t=this;return u()(n.a.mark(function e(){var r,s;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=void 0,r=void 0!=t.$route.query.infoid?t.$route.query.infoid:t.ruleForm.infoid,e.next=4,Object(o.f)({infoid:r});case 4:s=e.sent,t.relevance=s.detail;case 6:case"end":return e.stop()}},e,t)}))()},saveset:function(){var t=this;return u()(n.a.mark(function e(){var r,s,a;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.flag){e.next=2;break}return e.abrupt("return",t.$message.error("请先保存得分设置"));case 2:return r=t.ruleForm,s=1==t.value?1:0,a={infoid:r.infoid||t.$route.query.infoid,type:1,id:t.$route.query.id,title:r.title,share_title:r.share,sumscore:r.score,status:s,cover:t.backImg,qrcode:r.qrcode,json:t.remarkMsg},e.next=7,Object(o.a)(a);case 7:"success"===e.sent.result&&(t.$message.success("保存成功"),setTimeout(function(){t.$router.push("/certificate")},800));case 9:case"end":return e.stop()}},e,t)}))()}},created:function(){var t=this;void 0!=this.$route.query.id&&this.getCertificateMsg(),void 0!=this.$route.query.infoid&&(this.getlink(),this.remarkMsg=[],a()(this.ruleForm).forEach(function(e){t.ruleForm[e]=""}))},computed:{id:function(){return this.$route.query.id},score:function(){var t=this.ruleForm.score;return{score:t,num_start:this.ruleForm.num_start,num_end:this.ruleForm.num_end}},infoid:function(){return this.$route.query.infoid}},watch:{id:function(){"AddCertificate"==this.$route.name&&void 0!==this.$route.query.id&&this.getCertificateMsg()},infoid:function(){var t=this;"AddCertificate"==this.$route.name&&void 0!==this.$route.query.infoid&&(this.activenum="0",this.backImg="/Public/app/images/certificate_bg1.png",this.getlink(),this.remarkMsg=[],a()(this.ruleForm).forEach(function(e){t.ruleForm[e]=""}))},score:function(){this.score.score>this.relevance.sumscore&&(this.ruleForm.score=parseInt(this.relevance.sumscore)),this.score.num_start>100&&(this.ruleForm.num_start=100),this.score.num_end>100&&(this.ruleForm.num_end=100)},deep:!0}},v={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ks-container",{staticClass:"page"},[s("el-breadcrumb",{attrs:{separator:"/"}},[s("el-breadcrumb-item",{attrs:{to:{path:"/certificate"}}},[t._v("证书管理")]),t._v(" "),s("el-breadcrumb-item",[t._v("编辑证书")])],1),t._v(" "),s("div",{staticClass:"tips"},[t._v("请您遵守国家相关规定，切勿上传低俗色情、暴力恐怖、谣言诈骗、侵权盗版等相关内容，课堂街保有依据国家规定及平台规则进行处理的权利。")]),t._v(" "),s("div",{staticClass:"certhead"},[s("div",{staticClass:"certhead-msg"},[s("p",{staticClass:"certhead-title"},[t._v(t._s(t.relevance.title))]),t._v(" "),s("p",{staticClass:"certhead-sen"},[t._v("试卷总分："),s("span",{staticClass:"certhead-title__total"},[t._v(t._s(t.relevance.sumscore))])]),t._v(" "),s("p",{},[t._v("创建时间："+t._s(t.relevance.adddate))])])]),t._v(" "),s("div",{staticClass:"certopen"},[s("div",[s("span",[t._v("是否开启考试证书")]),t._v(" "),s("el-switch",{attrs:{"active-color":"#2a75ed"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1),t._v(" "),s("p",{staticClass:"certopen-over"},[t._v("考试结束后，可以给用户发放考试证书。生成后，用户可在个人中心-我的成就查看已生成证书")])]),t._v(" "),s("div",{staticClass:"certcon"},[s("div",{staticClass:"certcon-tem"},[s("div",{staticClass:"certcon-tem__con",style:{background:"url("+t.backImg+") center center / contain no-repeat"}},[s("p",{class:["certcon-tem__con--title",1==t.activenum?"bgactive":""]},[t._v(t._s(t.ruleForm.title))]),t._v(" "),s("div",{staticClass:"certcon-tem__msg"},[s("img",{staticClass:"certcon-tem__msg--image",attrs:{src:r("C1+l"),alt:""}}),t._v(" "),s("p",{class:["certcon-tem__msg--name",1==t.activenum?"bgactive":""]},[t._v("松仔")]),t._v(" "),s("p",{class:["certcon-tem__msg--grade",1==t.activenum?"bgactive":""]},[t._v(" 在《测试考试》获得了90分")]),t._v(" "),s("p",{class:["certcon-tem__msg--com",1==t.activenum?"bgactive":""]},[t.remarkMsg&&t.remarkMsg.length?s("span",[t._v(t._s(t.remarkMsg[0].comment))]):s("span",[t._v("“坚持做自己，坚持进步，坚持进步，坚持进步对知识点掌握非常不错，继续加油，相信会取得更大的成就！”")])])]),t._v(" "),s("div",{staticClass:"certcon-tem__focus"},[s("img",{attrs:{src:t.ruleForm.qrcode,alt:""}}),t._v(" "),s("div",{staticClass:"certcon-tem__focus--info"},[s("div",{staticClass:"certcon-tem__focus--name"},[t._v(t._s(t.ruleForm.share))]),t._v(" "),s("div",{staticClass:"certcon-tem__focus--desc"},[t._v("长按识别二维码关注")])])])])]),t._v(" "),s("div",{staticClass:"certcon-set"},[s("p",{staticClass:"certcon-rule"},[t._v("发放证书规则")]),t._v(" "),s("div",{staticClass:"send-rule"},[s("div",{staticClass:"send-rule__grade"},[t._v("\n                        考试成绩 "),s("span",{staticClass:"must"},[t._v("*")])]),t._v(" "),s("div",[s("span",[t._v("大于等于")]),t._v(" "),s("el-input",{staticClass:"scoreInput",attrs:{oninput:"value=value.replace(/[^\\d]/g,'')",placeholder:"输入分数"},model:{value:t.ruleForm.score,callback:function(e){t.$set(t.ruleForm,"score",e)},expression:"ruleForm.score"}}),t._v("\n                        (当前试卷总分为 "),s("span",{staticClass:"scoreInput-total"},[t._v(t._s(t.relevance.sumscore))]),t._v(" 分)\n                    ")],1)]),t._v(" "),s("p",{staticClass:"certcon-rule"},[t._v("证书设置")]),t._v(" "),s("div",{staticClass:"certificate-set"},[s("div",{staticClass:"send-rule__grade"},[t._v("\n                        证书名称 "),s("span",{staticClass:"must"},[t._v("*")])]),t._v(" "),s("div",[s("el-input",{attrs:{placeholder:"请输入证书名称"},model:{value:t.ruleForm.title,callback:function(e){t.$set(t.ruleForm,"title",e)},expression:"ruleForm.title"}})],1)]),t._v(" "),s("div",{staticClass:"certificate-set"},[s("div",{staticClass:"send-rule__grade"},[t._v("\n                        证书背景 "),s("span",{staticClass:"must"},[t._v("*")])]),t._v(" "),s("div",[s("p",{staticClass:"certcon-bg"},[t._v("证书图片建议尺寸 750*1334px 或 9:16，jpg/png 格式，大小不超过 2MB")]),t._v(" "),s("el-button",{on:{click:function(e){return t.$uploadImages(t.ruleForm,"imgurl")}}},[t._v("上传底图")]),t._v(" "),s("div",{staticClass:"certcon-select"},[s("div",{class:["certcon-select__change",-1==t.activenum?"active":""],on:{click:function(e){return t.active(-1)}}},[s("ks-image",{staticClass:"certcon-select__change--img",attrs:{src:t.ruleForm.imgurl}}),t._v(" "),-1==t.activenum?s("img",{staticClass:"selectimg",attrs:{src:r("iOP6"),alt:""}}):t._e()],1),t._v(" "),t._l(t.bgimg,function(e,a){return s("div",{key:e.id,class:["certcon-select__fix",t.activenum==a?"active":""],on:{click:function(r){return t.active(a,e)}}},[s("img",{staticClass:"certcon-select__fix--img",attrs:{src:e.url,alt:""}}),t._v(" "),t.activenum==a?s("img",{staticClass:"selectimg",attrs:{src:r("iOP6"),alt:""}}):t._e()])})],2)],1)]),t._v(" "),s("div",{staticClass:"certificate-set"},[s("div",{staticClass:"send-rule__grade"},[t._v("\n                        得分设置 "),s("span",{staticClass:"must"},[t._v("*")])]),t._v(" "),s("div",{staticClass:"set-right"},[s("el-row",{staticClass:"scoreset"},[s("el-col",{attrs:{span:4}},[t._v("得分范围")]),t._v(" "),s("el-col",{attrs:{span:16}},[t._v("点评内容 ")]),t._v(" "),s("el-col",{attrs:{span:4}},[t._v("操作")])],1),t._v(" "),t._l(t.remarkMsg,function(e,r){return s("el-row",{key:r,staticClass:"remark-conetent"},[s("el-col",{attrs:{span:4}},[t._v(t._s(e.num_start)+"-"+t._s(e.num_end))]),t._v(" "),s("el-col",{attrs:{span:16}},[t._v(t._s(e.comment)+" ")]),t._v(" "),s("el-col",{staticClass:"compile",attrs:{span:4}},[s("span",{on:{click:function(s){return t.compileRemark(e,r)}}},[t._v("编辑")]),t._v(" | "),s("span",{on:{click:function(e){return t.delremark(r)}}},[t._v("删除")])])],1)}),t._v(" "),t.flag?s("div",{staticClass:"addremark"},[s("div",{staticClass:"addremark-scope"},[s("span",[t._v("得分范围"),s("span",{staticClass:"must"},[t._v("*")])]),t._v(" "),s("el-input",{staticClass:"scoreInput",attrs:{oninput:"value=value.replace(/[^\\d]/g,'')",placeholder:"输入分数"},model:{value:t.ruleForm.num_start,callback:function(e){t.$set(t.ruleForm,"num_start",e)},expression:"ruleForm.num_start"}}),t._v(" - \n                                 "),s("el-input",{staticClass:"scoreInput",attrs:{oninput:"value=value.replace(/[^\\d]/g,'')",placeholder:"输入分数"},model:{value:t.ruleForm.num_end,callback:function(e){t.$set(t.ruleForm,"num_end",e)},expression:"ruleForm.num_end"}}),t._v(" 分\n                            ")],1),t._v(" "),s("div",{staticClass:"addremark-scope"},[s("span",[t._v("点评内容"),s("span",{staticClass:"must"},[t._v("*")])]),t._v(" "),s("el-input",{staticClass:"remarktext",attrs:{type:"textarea",resize:"none",placeholder:"请输入内容"},model:{value:t.ruleForm.comment,callback:function(e){t.$set(t.ruleForm,"comment",e)},expression:"ruleForm.comment"}})],1),t._v(" "),s("div",{staticClass:"addremark-btn"},[s("el-button",{on:{click:t.cancel}},[t._v("取消")]),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:t.saveRemark}},[t._v("保存")])],1)]):t._e(),t._v(" "),s("p",{staticClass:"addset",on:{click:t.addremark}},[t._v("添加点评")])],2)]),t._v(" "),s("div",{staticClass:"certificate-set"},[s("div",{staticClass:"send-rule__grade"},[t._v("\n                        二维码设置 "),s("span",{staticClass:"must"},[t._v("*")])]),t._v(" "),s("div",{staticClass:"upload-code"},[s("div",{staticClass:"upload-code__img"},[s("ks-image",{staticClass:"ewm-img",attrs:{src:t.ruleForm.qrcode}})],1),t._v(" "),s("div",{staticClass:"upload-code__msg"},[s("el-button",{on:{click:function(e){return t.$uploadImages(t.ruleForm,"qrcode")}}},[t._v("选择二维码")]),t._v(" "),s("p",[t._v("点击上传图片，建议尺寸750*750px的正方形二维码图片，您可选取公众号二维码等，jpg/png格式，图片小于1MB")])],1)])]),t._v(" "),s("div",{staticClass:"certificate-set"},[s("div",{staticClass:"send-rule__grade"},[t._v("\n                        分享语 \n                        ")]),t._v(" "),s("div",[s("el-input",{staticClass:"certificate-share",attrs:{placeholder:"请输入分享语"},model:{value:t.ruleForm.share,callback:function(e){t.$set(t.ruleForm,"share",e)},expression:"ruleForm.share"}})],1)])])]),t._v(" "),s("div",{staticClass:"add-data-footer",attrs:{align:"center"}},[s("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.saveset()}}},[t._v("保存设置")]),t._v(" "),s("el-button",{on:{click:function(e){return t.$router.push("/certificate")}}},[t._v("取消")])],1)],1)},staticRenderFns:[]};var m=r("C7Lr")(l,v,!1,function(t){r("UtrA")},"data-v-911dc09e",null);e.default=m.exports},"C1+l":function(t,e){t.exports="data:image/png;base64,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"},UtrA:function(t,e){},avkh:function(t,e,r){t.exports=r.p+"static/img/certificate1.98f1380.png"},iOP6:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAMAAADXqc3KAAAAV1BMVEUAAAAqc+4qdO0qde0qde0rde0ud+0ueO0veO04fu4/g+5Jie9UkPBvovJ8qvN/rPSRuPWjw/ewzPi20Pi80/m91Pm+1fnB1/nN3/rX5fvZ5vvk7fzq8f2NEmjBAAAABHRSTlMASX/iKns2uAAAAGRJREFUKM91zkkSgkAUBNFEPtJMMg8K9z8nEUCgNFZu3yZ52L/CAISgBCXcJX+fcJFsKb5wyCs2S+fSfmCXbnDJp7ILbOL6carNg02ebRPdwHtDCUpQghKUoAQlKEEJSlCCEpSs2gwFrMQABTkAAAAASUVORK5CYII="},ofAU:function(t,e,r){"use strict";e.b=function(t){return new a.a(function(e){Object(i.b)("Certificate.certificateList",t).then(function(t){e(t)})})},e.c=function(t){return new a.a(function(e){Object(i.b)("Certificate.changeStatus",t).then(function(t){e(t)})})},e.g=function(t){return new a.a(function(e){Object(i.b)("Certificate.getLinkList",t).then(function(t){e(t)})})},e.d=function(t){return new a.a(function(e){Object(i.b)("Certificate.del",t).then(function(t){e(t)})})},e.f=function(t){return new a.a(function(e){Object(i.b)("Certificate.getLinkDetail",t).then(function(t){e(t)})})},e.a=function(t){return new a.a(function(e){Object(i.b)("Certificate.addCertificate",t).then(function(t){e(t)})})},e.e=function(t){return new a.a(function(e){Object(i.b)("Certificate.getCertificate",t).then(function(t){e(t)})})};var s=r("rVsN"),a=r.n(s),i=r("60kx")}});