webpackJsonp([44],{G5wP:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("Foau"),i=a("Bdu3"),n={name:"CourseData",data:function(){return{visible:!1,loadSelectData:!0,list:[],page:1,pageCount:1,keyword:""}},methods:{back:function(){history.back()},addData:function(){this.loadSelectData=!0,this.visible=!0},getDataList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;Object(s.h)({p:e,courseid:this.$route.params.id,keyword:this.keyword,maxperpage:10}).then(function(e){e.list.map(function(t){t.checked=!1,t._isopen=1==t.isopen}),t.list=e.list,t.pageCount=e.page.total_pages})},deleteData:function(t){var e=this;Object(s.e)({id:t}).then(function(t){"success"===t.result&&(e.$msg(t.msg,"success"),e.getDataList())})},selectDataCallback:function(t){var e=this;this.visible=!1;var a=[];t.map(function(t){a.push(t.id)}),Object(s.a)({fileid:a,courseid:this.$route.params.id}).then(function(t){"success"===t.result&&(e.$msg(t.msg,"success"),e.getDataList())})},changeOpen:function(t){Object(s.c)({id:t.id}).then(function(t){})}},activated:function(){this.visible=!1,this.loadSelectData=!0,this.list=[],this.page=1,this.pageCount=1,this.keyword="",this.getDataList()},components:{DataFormat:a("EGQN").a,SelectData:i.a}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ks-container",[a("div",{staticClass:"ks-breadcrumb"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.back()}}},[t._v("课程列表")])]),t._v(" "),a("el-breadcrumb-item",[t._v("课程资料")])],1)],1),t._v(" "),a("div",{staticClass:"ks-mt20 clearfix"},[a("el-button",{staticClass:"ks-fr",attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.addData}},[t._v("添加")]),t._v(" "),a("el-input",{staticClass:"ks-max-w-fit",attrs:{placeholder:"请输入资料标题搜索"},on:{change:function(e){return t.getDataList()}},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}},[a("i",{staticClass:"el-icon-search el-input__icon ks-cursor-pointer",attrs:{slot:"suffix"},on:{click:function(e){return t.getDataList()}},slot:"suffix"})])],1),t._v(" "),a("div",{staticClass:"course-data ks-mt20"},[a("el-table",{attrs:{data:t.list}},[a("el-table-column",{attrs:{label:"选择",width:"60"},scopedSlots:t._u([{key:"default",fn:function(e){return a("div",{staticStyle:{"margin-left":"5px"}},[a("el-checkbox",{model:{value:e.row.checked,callback:function(a){t.$set(e.row,"checked",a)},expression:"scope.row.checked"}})],1)}}])}),t._v(" "),a("el-table-column",{attrs:{label:"标题"},scopedSlots:t._u([{key:"default",fn:function(t){return a("data-format",{attrs:{"file-name":t.row.file_name}})}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"size",label:"文件大小",width:"150px"}}),t._v(" "),a("el-table-column",{attrs:{label:"是否公开",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return a("el-switch",{attrs:{"active-color":t.$store.state.switch_on,"inactive-color":t.$store.state.switch_off},on:{change:function(a){return t.changeOpen(e.row)}},model:{value:e.row._isopen,callback:function(a){t.$set(e.row,"_isopen",a)},expression:"scope.row._isopen"}})}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return a("span",{},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除",placement:"top"}},[a("i",{staticClass:"iconfont icon-shanchu1 select-data__del",on:{click:function(a){return t.deleteData([e.row.id])}}})])],1)}}])})],1),t._v(" "),t.list.length?a("ks-table-footer",{staticClass:"ks-mt20 ks-pl15",attrs:{pagination:{current:t.page,total:t.pageCount},"table-data":t.list,"call-type":"array"},on:{"current-change":t.getDataList,trigger:t.deleteData}}):t._e()],1),t._v(" "),a("el-dialog",{attrs:{title:"选择资料",width:"920px",visible:t.visible},on:{"update:visible":function(e){t.visible=e},closed:function(e){t.loadSelectData=!1}}},[t.loadSelectData?a("select-data",{attrs:{type:"multiple"},on:{cancel:function(e){t.visible=!1},sure:t.selectDataCallback}}):t._e()],1)],1)},staticRenderFns:[]};var l=a("C7Lr")(n,c,!1,function(t){a("MzP2")},"data-v-416251ae",null);e.default=l.exports},MzP2:function(t,e){}});