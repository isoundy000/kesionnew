webpackJsonp([39],{AHAp:function(e,t){},lPPr:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("Llv5"),i={name:"StoreSetup",data:function(){return{diy:{isopen:-1},wechat:{enddate:"",price:null,isopen:1,func_info:[],authorizer_info:{}},wechatMenu:{},other:[]}},activated:function(){var e=this;this.wechatMenu={customize:!1,diy:!1,autoReply:!1,msgTemplate:!1,material:!1,msgManage:!1,data:!1,bind:!1},this.other=[],this.getMenuAuthorityByKey("store").then(function(t){t.childs&&t.childs.map(function(t){switch(t.action=t.action.toString(),t.action){case"1":e.wechatMenu.bind=t.power;break;case"2":e.wechatMenu.customize=t.power;break;case"3":e.wechatMenu.autoReply=t.power;break;case"4":e.wechatMenu.diy=t.power;break;case"5":e.other.push({url:"/store/material",name:"素材管理"});break;case"6":e.other.push({url:"/store/msgmanage",name:"留言管理"});break;case"7":e.other.push({url:"/store/more?act=index",name:"数据统计"});break;case"8":e.wechatMenu.msgTemplate=t.power}})}),this.$showLoading(),Object(a.a)({appid:102}).then(function(t){"success"===t.result?e.diy.isopen=1:e.diy.isopen=0}),Object(a.a)({appid:23}).then(function(t){if("success"===t.result){if(e.wechat.enddate=t.enddate,"unbind"===t.code?e.wechat.isopen=2:e.wechat.isopen=1,t.weixininfo){e.wechat.authorizer_info=t.weixininfo.authorizer_info;var s=new Array;t.weixininfo.authorization_info.func_info.map(function(t){var a=void 0;switch(t.funcscope_category.id){case 1:a="消息管理权限";break;case 2:a="用户管理权限";break;case 3:a="帐号服务权限";break;case 4:a="网页服务权限";break;case 5:a="微信小店权限";break;case 6:a="微信多客服权限";break;case 7:a="群发与通知权限";break;case 8:a="微信卡券权限";break;case 9:a="微信扫一扫权限";break;case 10:a="微信连WIFI权限";break;case 11:a="素材管理权限";break;case 12:a="微信摇周边权限";break;case 13:a="微信门店权限";break;case 14:a="微信支付权限";break;case 15:a="自定义菜单权限"}a&&(s.push({id:t.funcscope_category.id,name:a}),e.wechat.func_info=s)})}}else e.wechat.isopen=0,t.appinfo&&(e.wechat.price=t.appinfo.price);e.$hideLoading()})},methods:{menuSelect:function(e){this.$router.push(e)},diyStore:function(){var e=this;this.$store.ready(function(t){if(t.info.version>0&&t.info.version<=10){var s=e.$router.resolve({name:"Drag"});window.open(s.href)}else e.$tipsDialog(t.info.version_msg,{buttons:[{name:"升级为高级运营版",url:t.info.version_url}]})})},openWechat:function(){var e=this;this.$store.ready(function(t){100==t.info.version?e.$tipsDialog(t.info.version_msg,{buttons:[{name:"升级为高级运营版",url:t.info.version_url}]}):t.info.version>0?KTJ_FrameRouteJump(t.info.auth_url):e.$tipsDialog(t.info.version_msg,{buttons:[{name:"去升级",type:"primary",url:t.info.version_url}]})})}}},n={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ks-container",[s("ks-title",{attrs:{name:"公众号店铺",border:"none"}},[1==e.wechat.isopen?s("span",{staticClass:"ks-red ks-fz14 ks-ml10"},[e._v("(高级版)")]):e._e(),e._v(" "),s("div",{staticClass:"ks-fr"},[1==e.diy.isopen&&e.wechatMenu.diy?s("el-button",{staticClass:"ks-red-btn",attrs:{type:"primary",plain:""},on:{click:e.diyStore}},[e._v("装修店铺")]):e._e()],1)]),e._v(" "),0==e.diy.isopen&&e.wechatMenu.diy?s("el-alert",{attrs:{type:"warning",closable:!1}},[s("span",{staticClass:"ks-fz14"},[e._v("您暂未开通微门户编辑功能")]),e._v(" "),s("el-button",{staticClass:"ks-ml20",attrs:{type:"primary"},on:{click:e.diyStore}},[e._v("立即试用")])],1):e._e(),e._v(" "),s("el-card",{staticClass:"ks-mt20"},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[1==e.wechat.isopen?s("span",{staticClass:"ks-fz16"},[e._v("高级版")]):s("span",{staticClass:"ks-fz16"},[e._v("体验版")]),e._v(" "),1==e.wechat.isopen?s("span",{staticClass:"ks-tips ks-ml10"},[e._v("将店铺设置在自己的平台公众号")]):s("span",{staticClass:"ks-tips ks-ml10"},[e._v("将店铺设置在微门户平台公众号，无需注册公众号")]),e._v(" "),e.wechatMenu.diy?s("el-button",{staticClass:"ks-fr",staticStyle:{padding:"3px 0"},attrs:{type:"text"},on:{click:function(t){return e.$router.push("/?url=/home.html/default/Website/websitetemplate/1")}}},[e._v("切换风格")]):e._e()],1),e._v(" "),s("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":e.$route.fullPath,mode:"horizontal"},on:{select:e.menuSelect}},[s("el-menu-item",{attrs:{index:"/store"}},[e._v("店铺信息")]),e._v(" "),1==e.wechat.isopen&&e.wechatMenu.customize?s("el-menu-item",{attrs:{index:"/store/menu"}},[e._v("自定义菜单")]):e._e(),e._v(" "),1==e.wechat.isopen&&e.wechatMenu.autoReply?s("el-submenu",{attrs:{index:"autoreply"}},[s("template",{slot:"title"},[e._v("自动回复")]),e._v(" "),s("el-menu-item",{attrs:{index:"/store/autoreply?action=smartreply"}},[e._v("关键词回复")]),e._v(" "),s("el-menu-item",{attrs:{index:"/store/autoreply?action=autoreply"}},[e._v("收到消息回复")]),e._v(" "),s("el-menu-item",{attrs:{index:"/store/autoreply?action=beadded"}},[e._v("被关注回复")])],2):e._e(),e._v(" "),1==e.wechat.isopen&&e.wechatMenu.msgTemplate?s("el-menu-item",{attrs:{index:"/store/msgtemplate"}},[e._v("消息模板管理")]):e._e(),e._v(" "),1==e.wechat.isopen?s("el-submenu",{attrs:{index:"more"}},[s("template",{slot:"title"},[e._v("更多模块")]),e._v(" "),e._l(e.other,function(t){return s("el-menu-item",{key:t.name,attrs:{index:t.url},on:{click:function(s){return e.$router.push(t.url)}}},[e._v(e._s(t.name))])})],2):e._e()],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"/store"===e.$route.path,expression:"$route.path === '/store'"}],staticClass:"store-config"},[s("div",{staticClass:"iphone"},[s("div",{staticClass:"h5-name",attrs:{id:"h5Name"}},[e._v(e._s(e.$store.state.info.sitename))]),e._v(" "),s("iframe",{attrs:{src:"/Application/View/index/h5market/dist/m/index.html"}})]),e._v(" "),s("el-form",{staticClass:"store-form",attrs:{"label-width":"160px"}},[1==e.wechat.isopen||2==e.wechat.isopen?s("div",{staticClass:"store-title"},[e._v("店铺信息")]):e._e(),e._v(" "),s("el-form-item",{attrs:{label:"店铺名称"}},[s("span",{staticClass:"ks-ml20"},[e._v(e._s(e.$store.state.info.sitename))])]),e._v(" "),s("el-form-item",{attrs:{label:"店铺地址"}},[s("span",{staticClass:"ks-ml20 ks-link-color"},[e._v(e._s(e.$store.state.info.url))]),e._v(" "),s("el-button",{staticClass:"ks-red-btn ks-ml20",on:{click:function(t){return e.$copyUrl("storeLink")}}},[e._v("复制链接")]),e._v(" "),s("input",{staticClass:"ks-copy-link",attrs:{id:"storeLink",type:"text"},domProps:{value:e.$store.state.info.url}})],1),e._v(" "),1==e.wechat.isopen&&e.wechat.enddate?s("el-form-item",{attrs:{label:"到期时间"}},[s("div",{staticClass:"ks-ml20"},[e._v("\n            "+e._s(e.wechat.enddate)+"\n            "),s("router-link",{staticClass:"ks-ml10 ks-red",attrs:{to:"/?url=home.html/default/Shop/appDetail/23"}},[e._v("续费")])],1)]):e._e(),e._v(" "),s("el-form-item",{attrs:{label:"店铺二维码"}},[s("div",{staticClass:"code-img ks-ml20"},[s("img",{attrs:{src:e.$store.state.info.qrcode}})])])],1),e._v(" "),1==e.wechat.isopen?s("el-form",{staticClass:"store-form",attrs:{"label-width":"160px"}},[s("div",{staticClass:"store-title"},[e._v("公众号信息")]),e._v(" "),s("el-form-item",{attrs:{label:"公众号主体名称"}},[s("span",{staticClass:"ks-ml20"},[e._v(e._s(e.wechat.authorizer_info.principal_name))])]),e._v(" "),s("el-form-item",{attrs:{label:"公众号简要介绍"}},[s("span",{staticClass:"ks-ml20"},[e._v(e._s(e.wechat.authorizer_info.signature))])]),e._v(" "),e.wechat.authorizer_info.service_type_info?s("el-form-item",{attrs:{label:"公众号类型"}},[0==e.wechat.authorizer_info.service_type_info.id?s("span",{staticClass:"ks-ml20"},[e._v("订阅号")]):e._e(),e._v(" "),1==e.wechat.authorizer_info.service_type_info.id?s("span",{staticClass:"ks-ml20"},[e._v("历史老帐号升级后的订阅号")]):e._e(),e._v(" "),2==e.wechat.authorizer_info.service_type_info.id?s("span",{staticClass:"ks-ml20"},[e._v("服务号")]):e._e()]):e._e(),e._v(" "),e.wechat.authorizer_info.business_info?s("el-form-item",{attrs:{label:"公众号功能开通情况"}},[s("div",{staticClass:"wechat-authorize-list ks-ml20"},[s("ul",[s("li",{class:e.wechat.authorizer_info.business_info.open_pay&&"open"},[s("i",{staticClass:"iconfont icon-chenggong"}),e._v("是否开通微信支付功能\n              ")]),e._v(" "),s("li",{class:e.wechat.authorizer_info.business_info.open_store&&"open"},[s("i",{staticClass:"iconfont icon-chenggong"}),e._v("是否开通微信门店功能\n              ")]),e._v(" "),s("li",{class:e.wechat.authorizer_info.business_info.open_scan&&"open"},[s("i",{staticClass:"iconfont icon-chenggong"}),e._v("是否开通微信扫商品功能\n              ")]),e._v(" "),s("li",{class:e.wechat.authorizer_info.business_info.open_card&&"open"},[s("i",{staticClass:"iconfont icon-chenggong"}),e._v("是否开通微信卡券功能\n              ")]),e._v(" "),s("li",{class:e.wechat.authorizer_info.business_info.open_shake&&"open"},[s("i",{staticClass:"iconfont icon-chenggong"}),e._v("是否开通微信摇一摇功能\n              ")])])])]):e._e(),e._v(" "),s("el-form-item",{attrs:{label:"公众号已授权权限集"}},[e.wechat.func_info.length?s("div",{staticClass:"wechat-authorize-set ks-ml20"},e._l(e.wechat.func_info,function(t,a){return s("span",{key:t.id,class:t.open&&"open"},[e._v(e._s(a+1)+"、"+e._s(t.name))])}),0):s("div",{staticClass:"wechat-authorize-set ks-ml20"},[e._v("暂无授权项")])]),e._v(" "),s("el-form-item",{attrs:{label:"公众号二维码"}},[s("div",{staticClass:"code-img ks-ml20"},[s("img",{attrs:{src:e.wechat.authorizer_info.qrcode_url}})])]),e._v(" "),e.wechatMenu.bind?s("el-form-item",[s("el-button",{staticClass:"ks-red-btn ks-ml20",on:{click:function(t){return e.$router.push("/?url=/home.html/wechat/Index/wechatConfig?appid-23")}}},[e._v("重新绑定公众号")])],1):e._e()],1):e._e()],1),e._v(" "),s("keep-alive",[s("router-view")],1)],1),e._v(" "),1!=e.wechat.isopen?s("el-card",{staticClass:"ks-mt20"},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("span",{staticClass:"ks-fz16"},[e._v("升级版")]),e._v(" "),s("span",{staticClass:"ks-tips ks-ml10"},[e._v("将店铺设置在您自己的公众号，收入直接进入您的微信支付对应的收款账户")])]),e._v(" "),s("div",{staticClass:"advanced-version"},[s("p",[e._v("\n        绑定高级版公众号：\n        "),s("br"),e._v("1.前提条件：你需要在微信公众平台申请开通“微信认证服务号”，且此服务号需要向微信申请开通“微信支付权限”；\n        "),s("br"),e._v("2.服务号一经绑定不可更换，绑定后您可以使用自己服务号的微信支付；\n        "),s("br"),e._v("3.收入直接进入您的微信支付对应的收款账户，且不用经过平台，免去交易手续费；\n        "),s("br"),e._v("4. 您还可以通过此服务号给用户发送服务号通知。\n      ")]),e._v(" "),e.wechatMenu.bind?s("el-button",{staticClass:"ks-mt30",attrs:{type:"primary"},on:{click:function(t){return e.openWechat()}}},[e._v("绑定公众号")]):e._e(),e._v(" "),"testv1"===e.$store.state.info.version?s("div",{staticClass:"ks-mt10 ks-fz14 ks-color-primary"},[e._v(e._s(e.$store.state.info.version_msg))]):e._e()],1)]):e._e()],1)},staticRenderFns:[]};var o=s("C7Lr")(i,n,!1,function(e){s("AHAp")},"data-v-4f208144",null);t.default=o.exports}});