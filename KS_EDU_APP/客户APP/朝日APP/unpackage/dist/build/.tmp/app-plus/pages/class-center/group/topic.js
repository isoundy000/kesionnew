(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/class-center/group/topic"],{"2db0":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement;t._self._c},o=[];n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o})},3990:function(t,e,n){"use strict";n.r(e);var i=n("3c20"),o=n.n(i);for(var a in i)"default"!==a&&function(t){n.d(e,t,function(){return i[t]})}(a);e["default"]=o.a},"3c20":function(t,e,n){"use strict";(function(t,i){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n("c1fb"),a=function(){return n.e("components/ks-components/image/Image").then(n.bind(null,"319f"))},s={data:function(){return{baseUrl:this.$store.state.SRC+"/config/app",getParameters:{boardid:0,content:"",imgids:""},imgids:[],domain:this.$store.state.SRC,fontNum:500,remainingNum:500}},components:{KsImage:a},onLoad:function(t){this.getParameters.boardid=t.boardid},methods:{conInput:function(t){this.getParameters.content=t.detail.value,this.remainingNum=this.fontNum-this.getParameters.content.length},upload:function(e){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return new Promise(function(o){var a=n.$store.state.appToken,s=n.$store.state.userId,u=e[i];u?(t.showLoading({title:"上传第"+(i+1)+"张图"}),t.uploadFile({url:n.domain+"/webapi/School/UploadFile?userid="+s+"&apptoken="+a,fileType:"image",filePath:u,name:"file",success:function(a){var s=JSON.parse(a.data).fileUrl;e[i]=n.domain+s,t.hideLoading(),n.upload(e,i+1).then(function(){o()})}})):o()})},uploadImg:function(){var e=this,n=(this.$store.state.appToken,this.$store.state.userId);n?t.chooseImage({count:9-this.imgids.length,sizeType:["original","compressed"],sourceType:["album"],success:function(t){e.imgids=e.imgids.concat(t.tempFilePaths)},error:function(t){console.log(i(t," at pages\\class-center\\group\\topic.vue:100"))}}):(t.showToast({title:"请先登录",icon:"none"}),setTimeout(function(){t.switchTab({url:"/pages/user/index"})},1e3))},deleteImg:function(t){this.imgids.splice(t,1)},submit:function(){var e=this;this.getParameters.content?(console.log(i(this.imgids," at pages\\class-center\\group\\topic.vue:122")),this.upload(this.imgids).then(function(){t.showLoading({title:"正在提交中"}),e.getParameters.imgids=e.imgids.toString(),(0,o.PublishTopic)(e.getParameters).then(function(e){t.hideLoading(),e.result?(t.showToast({title:e.msg,duration:2e3,icon:"none"}),setTimeout(function(){t.navigateBack()},2e3)):t.showToast({title:e.msg,duration:2e3,icon:"none"})})})):t.showToast({title:"请输入话题内容",duration:2e3,icon:"none"})}}};e.default=s}).call(this,n("6e42")["default"],n("0de9")["default"])},"458f":function(t,e,n){"use strict";var i=n("a946"),o=n.n(i);o.a},"71e7":function(t,e,n){"use strict";n.r(e);var i=n("2db0"),o=n("3990");for(var a in o)"default"!==a&&function(t){n.d(e,t,function(){return o[t]})}(a);n("458f");var s=n("2877"),u=Object(s["a"])(o["default"],i["a"],i["b"],!1,null,"3c601514",null);e["default"]=u.exports},a946:function(t,e,n){},c595:function(t,e,n){"use strict";(function(t){n("569f"),n("921b");i(n("66fd"));var e=i(n("71e7"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("6e42")["createPage"])}},[["c595","common/runtime","common/vendor"]]]);