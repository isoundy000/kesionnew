(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/class-center/group/topicview"],{"32b5":function(t,e,o){"use strict";o.r(e);var n=o("a397"),i=o("9321");for(var a in i)"default"!==a&&function(t){o.d(e,t,function(){return i[t]})}(a);o("a9e3");var s=o("2877"),c=Object(s["a"])(i["default"],n["a"],n["b"],!1,null,"8b4dd72c",null);e["default"]=c.exports},"6bab":function(t,e,o){"use strict";(function(t){o("569f"),o("921b");n(o("66fd"));var e=n(o("32b5"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,o("6e42")["createPage"])},8344:function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=o("c1fb"),i=function(){return o.e("components/ks-components/image/Image").then(o.bind(null,"319f"))},a=function(){return Promise.all([o.e("common/vendor"),o.e("components/ks-components/collect/collect")]).then(o.bind(null,"aedc"))},s=function(){return o.e("components/ks-components/empty/empty").then(o.bind(null,"da4d"))},c=function(){return o.e("components/uni/uni-load-more/uni-load-more").then(o.bind(null,"ffb3"))},r={data:function(){return{baseUrl:this.$store.state.SRC+"/config/app",loaded:!1,topicData:{},topiclist:[],getParameters:{topicid:0,pageindex:1,pagesize:10},content:"",pageCount:0,moreStatus:"more",isFocus:!1,bottomHeight:0}},components:{KsImage:i,KsEmpty:s,KsCollect:a,UniLoadMore:c},onLoad:function(e){this.getParameters.topicid=e.topicid,t.showLoading({title:"加载中"}),this.loadPage()},onReachBottom:function(t){this.getParameters.pageindex++,this.moreList()},onShareAppMessage:function(){var t=this,e={title:t.topicData.content,path:"/pages/class-center/group/topicview?topicid="+t.getParameters.topicid,imageUrl:t.topicData.imgList[0]||this.baseUrl+"/static/images/common/default-img.png",success:function(t){t.errMsg},fail:function(){"shareAppMessage:fail cancel"==res.errMsg||res.errMsg}};return e},methods:{setBottomHeight:function(t){this.isFocus=!0,this.bottomHeight=t.detail.height},setNoHeight:function(){this.isFocus=!1,this.bottomHeight=0},setResult:function(t){1==t&&this.loadPage()},reply:function(){var e=this;if(this.topicData.isTourist)this.content?(t.showLoading({title:"正在提交中"}),(0,n.ReplyTopic)({content:this.content,topicid:this.getParameters.topicid}).then(function(o){t.hideLoading(),o.result?(t.showToast({title:o.msg,duration:2e3,icon:"none"}),e.loadPage()):t.showToast({title:o.msg,duration:2e3,icon:"none"}),e.content=""})):t.showToast({title:"请输入回复内容",duration:2e3,icon:"none"});else{var o=this;o.$store.ready(function(e){1==e.isLogin?o.content?(t.showLoading({title:"正在提交中"}),(0,n.ReplyTopic)({content:o.content,topicid:o.getParameters.topicid}).then(function(e){t.hideLoading(),e.result?(t.showToast({title:e.msg,duration:2e3,icon:"none"}),o.loadPage()):t.showToast({title:e.msg,duration:2e3,icon:"none"}),o.content=""})):t.showToast({title:"请输入回复内容",duration:2e3,icon:"none"}):(t.showToast({title:"您未登录，请先登录",duration:1500,icon:"none"}),setTimeout(function(){t.navigateTo({url:"/pages/user/login/index"})},1500),o.content="")})}},moreList:function(){this.getParameters.pageindex>this.pageCount?this.moreStatus="noMore":(this.moreStatus="loading",this.loadPage("more"))},loadPage:function(e){var o=this;"more"==e?(0,n.GetTopicView)(this.getParameters).then(function(t){o.moreStatus="more",t.result&&(o.topiclist=o.topiclist.concat(t.replyList)),o.loaded=!0}):(this.getParameters.pageindex=1,(0,n.GetTopicView)(this.getParameters).then(function(e){e.result?(o.topicData=e,o.pageCount=e.pageCount,1==o.pageCount?o.moreStatus="noMore":o.moreStatus="more",o.topiclist=e.replyList):(o.topiclist=[],o.pageCount=0),o.loaded=!0,t.hideLoading()}))}}};e.default=r}).call(this,o("6e42")["default"])},"90f8":function(t,e,o){},9321:function(t,e,o){"use strict";o.r(e);var n=o("8344"),i=o.n(n);for(var a in n)"default"!==a&&function(t){o.d(e,t,function(){return n[t]})}(a);e["default"]=i.a},a397:function(t,e,o){"use strict";var n=function(){var t=this,e=t.$createElement;t._self._c},i=[];o.d(e,"a",function(){return n}),o.d(e,"b",function(){return i})},a9e3:function(t,e,o){"use strict";var n=o("90f8"),i=o.n(n);i.a}},[["6bab","common/runtime","common/vendor"]]]);