(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/local/download"],{"20e3":function(t,i,e){"use strict";var n=function(){var t=this,i=t.$createElement,e=(t._self._c,t.__map(t.list,function(i,e){var n=t.activeList.indexOf(i.periodid);return{$orig:t.__get_orig(i),g0:n}}));t._isMounted||(t.e0=function(i){t.showkeshi=!t.showkeshi}),t.$mp.data=Object.assign({},{$root:{l0:e}})},s=[];e.d(i,"a",function(){return n}),e.d(i,"b",function(){return s})},"4a64":function(t,i,e){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=e("a5e9"),s={data:function(){return{courseId:"",list:[],showkeshi:!0,courseName:"",activeList:[],state:{},all:!1,noFinishList:[],baseUrl:this.$store.state.SRC+"/config/app"}},onNavigationBarButtonTap:function(){t.navigateTo({url:"/pages/user/local/index?courseid=".concat(this.courseId,"&title=").concat(this.courseName)})},methods:{open:function(){t.navigateTo({url:"/pages/user/local/index?courseid=".concat(this.courseId,"&periodids=").concat(this.activeList,"&title=").concat(this.courseName)})},allSelect:function(){if(this.noFinishList.length>0)if(this.all=!this.all,this.all)for(var t=0;t<this.list.length;t++)0==this.list[t].state&&this.activeList.push(this.list[t].periodid);else this.activeList=[]},getList:function(){var i=this;(0,n.getCourseCatalog)({courseid:this.courseId}).then(function(e){i.courseName=e.catalogData.CourseName,i.list=e.periods.filter(function(t){if(1==t.$isCanLearn&&0==t.type&&1==t.teachWay)return t.isfinish=!1,t.state=0,t}),i.list.length>0?i.getJsonTxt():(t.showToast({title:"没有可缓存课件",icon:"none"}),setTimeout(function(){t.navigateBack()},2e3))})},select:function(t){-1==this.activeList.indexOf(t)?this.activeList.push(t):this.activeList=this.activeList.filter(function(i){if(i!=t)return i}),this.all=this.noFinishList.length==this.activeList.length},getJsonTxt:function(){var t=this;plus.io.resolveLocalFileSystemURL("_doc/cache/".concat(this.state.userId,".txt"),function(i){var e=new plus.io.FileReader;e.readAsText(i),e.onload=function(i){var e=JSON.parse(i.target.result),n=[];n=e.map(function(t){return t.courseid});var s=n.indexOf(t.courseId),a=[];-1!=s&&(a=e[s].taskList),t.list.map(function(t){a.map(function(i){t.periodid==i.periodid&&(t.isfinish=!0,t.state=i.state)})}),t.noFinishList=t.list.filter(function(t){if(0==t.state)return t})}},function(i){t.noFinishList=t.list})},ready:function(){var t=this;"object"===typeof plus?this.getList():setTimeout(function(){t.ready()},100)}},onLoad:function(t){this.courseId=t.courseid},onShow:function(){var t=this;this.activeList=[],this.$store.ready(function(i){t.state=i,t.ready()})}};i.default=s}).call(this,e("6e42")["default"])},6630:function(t,i,e){"use strict";e.r(i);var n=e("4a64"),s=e.n(n);for(var a in n)"default"!==a&&function(t){e.d(i,t,function(){return n[t]})}(a);i["default"]=s.a},"7c61":function(t,i,e){},aa24:function(t,i,e){"use strict";var n=e("7c61"),s=e.n(n);s.a},f981:function(t,i,e){"use strict";e.r(i);var n=e("20e3"),s=e("6630");for(var a in s)"default"!==a&&function(t){e.d(i,t,function(){return s[t]})}(a);e("aa24");var o=e("2877"),c=Object(o["a"])(s["default"],n["a"],n["b"],!1,null,"42414832",null);i["default"]=c.exports},fa70:function(t,i,e){"use strict";(function(t){e("661b"),e("921b");n(e("66fd"));var i=n(e("f981"));function n(t){return t&&t.__esModule?t:{default:t}}t(i.default)}).call(this,e("6e42")["createPage"])}},[["fa70","common/runtime","common/vendor"]]]);