(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/local/download"],{"549c":function(t,e,i){"use strict";(function(t){i("3099"),i("921b");s(i("66fd"));var e=s(i("f637"));function s(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,i("6e42")["createPage"])},"5e098":function(t,e,i){},6622:function(t,e,i){"use strict";var s=i("5e098"),n=i.n(s);n.a},a2c1:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=(t._self._c,t.__map(t.list,function(e,i){var s=t.activeList.indexOf(e.periodid);return{$orig:t.__get_orig(e),g0:s}}));t._isMounted||(t.e0=function(e){t.showkeshi=!t.showkeshi}),t.$mp.data=Object.assign({},{$root:{l0:i}})},n=[];i.d(e,"a",function(){return s}),i.d(e,"b",function(){return n})},a6e5:function(t,e,i){"use strict";i.r(e);var s=i("bca8"),n=i.n(s);for(var a in s)"default"!==a&&function(t){i.d(e,t,function(){return s[t]})}(a);e["default"]=n.a},bca8:function(t,e,i){"use strict";(function(t,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i("63be"),a={data:function(){return{courseId:"",list:[],showkeshi:!0,courseName:"",activeList:[],state:{},all:!1,noFinishList:[]}},onNavigationBarButtonTap:function(){t.navigateTo({url:"/pages/user/local/index?courseid=".concat(this.courseId,"&title=").concat(this.courseName)})},methods:{open:function(){console.log(s(this.activeList," at pages\\user\\local\\download.vue:61")),t.navigateTo({url:"/pages/user/local/index?courseid=".concat(this.courseId,"&periodids=").concat(this.activeList,"&title=").concat(this.courseName)})},allSelect:function(){if(this.noFinishList.length>0)if(this.all=!this.all,this.all)for(var t=0;t<this.list.length;t++)0==this.list[t].state&&this.activeList.push(this.list[t].periodid);else this.activeList=[]},getList:function(){var t=this;(0,n.GetcosInfo)({courseid:this.courseId}).then(function(e){t.courseName=e.CourseName;var i=e.timespan,n=e.Course.periodlist,a=!1,o=!1,c=[],r=e.Pay;e.isloginplay,e.ispower;n.map(function(t){if(a||0==t.isfree||o)t.isCanLearn=1;else if(1==t.islistening)t.isCanLearn=3;else if(r)if(1==r.isbuyallcos&&o)t.isCanLearn=1;else for(var e=0;e<c.length;e++){var s=c[e];if(s.id==t.periodid){if(0==s.shixian){t.isCanLearn=1;break}if(s.enddate>i){t.isCanLearn=1;break}1==s.islistening?t.isCanLearn=3:t.isCanLearn=2}}}),t.list=n.filter(function(t){if(console.log(s(t.isCanLearn," at pages\\user\\local\\download.vue:151")),1==t.isCanLearn&&(1==t.addtype||4==t.addtype))return t.isfinish=!1,t.state=0,t}),t.getJsonTxt()})},select:function(t){-1==this.activeList.indexOf(t)?this.activeList.push(t):this.activeList=this.activeList.filter(function(e){if(e!=t)return e}),this.all=this.noFinishList.length==this.activeList.length,console.log(s(this.activeList,this.activeList.length," at pages\\user\\local\\download.vue:176"))},getJsonTxt:function(){var t=this;plus.io.resolveLocalFileSystemURL("_doc/cache/".concat(this.state.userId,".txt"),function(e){var i=new plus.io.FileReader;i.readAsText(e),i.onload=function(e){var i=JSON.parse(e.target.result),n=[];n=i.map(function(t){return t.courseid});var a=n.indexOf(t.courseId),o=[];-1!=a&&(o=i[a].taskList),t.list.map(function(t){o.map(function(e){t.periodid==e.periodid&&(t.isfinish=!0,t.state=e.state)})}),console.log(s(JSON.stringify(t.list)," at pages\\user\\local\\download.vue:203")),t.noFinishList=t.list.filter(function(t){if(console.log(s(t.state," at pages\\user\\local\\download.vue:205")),0==t.state)return t})}},function(e){t.noFinishList=t.list,console.log(s(e.message," at pages\\user\\local\\download.vue:214"))})},plusReady:function(){this.getList()},ready:function(){var t=this;plus?this.plusReady():setTimeout(function(){t.ready()},100)}},onShow:function(){this.activeList=[],this.ready()},onLoad:function(t){var e=this;console.log(s(t," at pages\\user\\local\\download.vue:236")),this.$store.ready(function(i){e.state=i,e.courseId=t.courseid})}};e.default=a}).call(this,i("6e42")["default"],i("0de9")["default"])},f637:function(t,e,i){"use strict";i.r(e);var s=i("a2c1"),n=i("a6e5");for(var a in n)"default"!==a&&function(t){i.d(e,t,function(){return n[t]})}(a);i("6622");var o=i("2877"),c=Object(o["a"])(n["default"],s["a"],s["b"],!1,null,"16ea3e80",null);e["default"]=c.exports}},[["549c","common/runtime","common/vendor"]]]);