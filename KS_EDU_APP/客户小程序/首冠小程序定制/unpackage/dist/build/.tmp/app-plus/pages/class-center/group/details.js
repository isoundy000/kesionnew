(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/class-center/group/details"],{"306b":function(t,o,e){"use strict";var i=e("f86f"),n=e.n(i);n.a},"631d":function(t,o,e){"use strict";var i=function(){var t=this,o=t.$createElement,e=(t._self._c,t.__map(t.grouplist,function(o,e){var i=Number(o.topicId);return{$orig:t.__get_orig(o),m0:i}}));t.$mp.data=Object.assign({},{$root:{l0:e}})},n=[];e.d(o,"a",function(){return i}),e.d(o,"b",function(){return n})},"6b4f":function(t,o,e){"use strict";(function(t){e("3099"),e("921b");i(e("66fd"));var o=i(e("fa44"));function i(t){return t&&t.__esModule?t:{default:t}}t(o.default)}).call(this,e("6e42")["createPage"])},8864:function(t,o,e){"use strict";(function(t,i){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n=e("74ce"),s=function(){return e.e("components/ks-components/image/Image").then(e.bind(null,"32e8"))},a=function(){return Promise.all([e.e("common/vendor"),e.e("components/ks-components/collect/collect")]).then(e.bind(null,"246d"))},r=function(){return e.e("components/ks-components/empty/empty").then(e.bind(null,"579c"))},u=function(){return e.e("components/uni/uni-load-more/uni-load-more").then(e.bind(null,"cf96"))},c={data:function(){return{loaded:!1,groupData:{},isJoin:!1,showReply:!1,grouplist:[],getParameters:{boardid:0,type:"0",pageindex:1,pagesize:10},topicid:0,remark:"",content:"",pageCount:0,moreStatus:"more",isFocus:!1,bottomHeight:-46,isFocus2:!1,bottomHeight2:-243,refresh:!1}},components:{KsImage:s,KsCollect:a,KsEmpty:r,UniLoadMore:u},onLoad:function(o){this.getParameters.boardid=o.boardid,t.showLoading({title:"加载中"}),this.loadPage()},onShow:function(){this.refresh&&(this.refresh=!1,this.loadPage())},onReachBottom:function(t){this.getParameters.pageindex++,this.moreList()},onShareAppMessage:function(){var t=this,o={title:t.groupData.boardname,path:"/pages/class-center/group/details?boardid="+t.getParameters.boardid,imageUrl:t.groupData.ico||"/static/common/default-logo.png",success:function(t){t.errMsg},fail:function(){"shareAppMessage:fail cancel"==res.errMsg||res.errMsg}};return o},methods:{previewImage:function(o,e,n){e?t.previewImage({urls:o,current:n,longPressActions:{itemList:["发送给朋友","保存图片","收藏"],itemColor:"#fff",success:function(t){},fail:function(t){console.log(i(t.errMsg," at pages\\class-center\\group\\details.vue:202"))}},success:function(t){},fail:function(o){t.showToast({title:"err.errMsg",icon:"none"})}}):t.showToast({title:"没有找到图片",icon:"none"})},open:function(o){t.navigateTo({url:o})},openTopic:function(o){this.refresh=!0,this.groupData.Status,0==this.groupData.Status?t.showToast({title:"你的申请正在审核",icon:"none"}):2==this.groupData.Status?t.showToast({title:"你的申请已被拒绝",icon:"none"}):1==this.groupData.istrue?t.navigateTo({url:o}):1==this.groupData.Status&&t.navigateTo({url:o})},setBottomHeight:function(t){this.isFocus=!0,this.showReply&&(this.bottomHeight=t.detail.height)},setBottomHeight2:function(t){this.isFocus2=!0,this.isJoin&&(this.bottomHeight2=t.detail.height)},setNoHeight:function(){this.isFocus=!1,this.showReply?this.bottomHeight=0:this.bottomHeight=-46},setNoHeight2:function(){this.isFocus2=!1,this.isJoin?this.bottomHeight2=0:this.bottomHeight2=-243},closeReply:function(t){"reply"==t?(this.showReply=!1,this.isFocus=!1,this.bottomHeight=-46,this.content=""):(this.isJoin=!1,this.isFocus2=!1,this.bottomHeight2=-243,this.remark="")},setResult:function(t){1==t&&this.loadPage()},replyTopic:function(t){this.cancel(),this.showReply=!0,this.bottomHeight=0,this.topicid=t},reply:function(){var o=this;if(this.groupData.isTourist)this.content?(t.showLoading({title:"正在提交中"}),(0,n.ReplyTopic)({content:this.content,topicid:this.topicid}).then(function(e){t.hideLoading(),e.result?(t.showToast({title:e.msg,duration:2e3,icon:"none"}),o.loadPage()):t.showToast({title:e.msg,duration:2e3,icon:"none"}),o.content="",o.topicid=0,o.showReply=!1,o.isFocus=!1,o.bottomHeight=-46})):t.showToast({title:"请输入回复内容",duration:2e3,icon:"none"});else{var e=this;e.$store.ready(function(o){1==o.isLogin?(console.log(i(o.isLogin," at pages\\class-center\\group\\details.vue:356")),e.content?(t.showLoading({title:"正在提交中"}),(0,n.ReplyTopic)({content:e.content,topicid:e.topicid}).then(function(o){t.hideLoading(),o.result?(t.showToast({title:o.msg,duration:2e3,icon:"none"}),e.loadPage()):t.showToast({title:o.msg,duration:2e3,icon:"none"}),e.content="",e.topicid=0,e.showReply=!1,e.isFocus=!1,e.bottomHeight=-46})):t.showToast({title:"请输入回复内容",duration:2e3,icon:"none"})):(t.showToast({title:"您未登录，请先登录",duration:1500,icon:"none"}),setTimeout(function(){t.navigateTo({url:"/pages/user/login/index"})},1500),e.content="",e.topicid=0,e.showReply=!1,e.isFocus=!1,e.bottomHeight=-46)})}},setTabIndex:function(t){this.getParameters.type=t,this.loadPage()},moreList:function(){this.getParameters.pageindex>this.pageCount?this.moreStatus="noMore":(this.moreStatus="loading",this.loadPage("more"))},loadPage:function(o){var e=this;"more"==o?(0,n.GetGroupListView)(this.getParameters).then(function(t){e.moreStatus="more",t.result&&(e.grouplist=e.grouplist.concat(t.data)),e.loaded=!0}):(this.getParameters.pageindex=1,(0,n.GetGroupListView)(this.getParameters).then(function(o){o.result?(e.groupData=o,e.pageCount=o.pageCount,1==e.pageCount?e.moreStatus="noMore":e.moreStatus="more",e.grouplist=o.data):(e.grouplist=[],e.pageCount=0),e.loaded=!0,t.hideLoading()}))},cancel:function(){this.isJoin=!1,this.isFocus2=!1,this.bottomHeight2=-243,this.remark=""},joinGroup:function(){this.isJoin=!0,this.bottomHeight2=0},submit:function(o,e){var i=this;this.$store.ready(function(n){1==n.isLogin?1==o?1==e.isVip&&0==e.vip_ischarge?i.submitFree():i.submitNoFree():i.submitFree():(i.refresh=!0,t.showToast({title:"您未登录，请先登录",duration:1500,icon:"none"}),setTimeout(function(){t.navigateTo({url:"/pages/user/login/index"})},1500),i.remark="",i.isJoin=!1,i.isFocus2=!1,i.bottomHeight2=-243)})},submitFree:function(){var o=this;t.showLoading({title:"正在提交中"}),(0,n.JoinGroup)({boardid:this.getParameters.boardid,remark:this.remark}).then(function(e){t.hideLoading(),e.result?o.$store.dispatch("getUserInfo").then(function(i){t.showToast({title:e.msg,duration:2e3,icon:"none"}),o.loadPage()}):t.showToast({title:e.msg,duration:2e3,icon:"none"}),o.remark="",o.isJoin=!1,o.isFocus2=!1,o.bottomHeight2=-243})},submitNoFree:function(){var o=this;t.showModal({title:"提示",content:"您是否确定支付，确认支付后将对您的余额进行扣款？",success:function(e){e.confirm?(t.showLoading({title:"正在提交中"}),(0,n.JoinGroup)({boardid:o.getParameters.boardid,remark:o.remark}).then(function(e){t.hideLoading(),e.result?o.$store.dispatch("getUserInfo").then(function(i){t.showToast({title:e.msg,duration:2e3,icon:"none"}),setTimeout(function(){o.loadPage()},2e3)}):t.showToast({title:e.msg,duration:2e3,icon:"none"}),o.remark="",o.isJoin=!1,o.isFocus2=!1,o.bottomHeight2=-243})):e.cancel}})}}};o.default=c}).call(this,e("6e42")["default"],e("0de9")["default"])},"93d6":function(t,o,e){"use strict";e.r(o);var i=e("8864"),n=e.n(i);for(var s in i)"default"!==s&&function(t){e.d(o,t,function(){return i[t]})}(s);o["default"]=n.a},f86f:function(t,o,e){},fa44:function(t,o,e){"use strict";e.r(o);var i=e("631d"),n=e("93d6");for(var s in n)"default"!==s&&function(t){e.d(o,t,function(){return n[t]})}(s);e("306b");var a=e("2877"),r=Object(a["a"])(n["default"],i["a"],i["b"],!1,null,"ec3d63fa",null);o["default"]=r.exports}},[["6b4f","common/runtime","common/vendor"]]]);