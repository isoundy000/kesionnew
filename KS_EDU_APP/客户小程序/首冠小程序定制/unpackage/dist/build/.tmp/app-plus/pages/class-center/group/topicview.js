(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/class-center/group/topicview"],{"0967":function(t,e,o){"use strict";(function(t){o("3099"),o("921b");n(o("66fd"));var e=n(o("4657"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,o("6e42")["createPage"])},1240:function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=o("74ce"),i=function(){return o.e("components/ks-components/image/Image").then(o.bind(null,"32e8"))},a=function(){return Promise.all([o.e("common/vendor"),o.e("components/ks-components/collect/collect")]).then(o.bind(null,"246d"))},s=function(){return o.e("components/ks-components/empty/empty").then(o.bind(null,"579c"))},c=function(){return o.e("components/uni/uni-load-more/uni-load-more").then(o.bind(null,"cf96"))},r={data:function(){return{loaded:!1,topicData:{},topiclist:[],getParameters:{topicid:0,pageindex:1,pagesize:10},content:"",pageCount:0,moreStatus:"more",isFocus:!1,bottomHeight:0}},components:{KsImage:i,KsEmpty:s,KsCollect:a,UniLoadMore:c},onLoad:function(e){this.getParameters.topicid=e.topicid,t.showLoading({title:"加载中"}),this.loadPage()},onReachBottom:function(t){this.getParameters.pageindex++,this.moreList()},onShareAppMessage:function(){var t=this,e={title:t.topicData.content,path:"/pages/class-center/group/topicview?topicid="+t.getParameters.topicid,imageUrl:t.topicData.imgList[0]||"/static/common/default-img.png",success:function(t){t.errMsg},fail:function(){"shareAppMessage:fail cancel"==res.errMsg||res.errMsg}};return e},methods:{setBottomHeight:function(t){this.isFocus=!0,this.bottomHeight=t.detail.height},setNoHeight:function(){this.isFocus=!1,this.bottomHeight=0},setResult:function(t){1==t&&this.loadPage()},reply:function(){var e=this;if(this.topicData.isTourist)this.content?(t.showLoading({title:"正在提交中"}),(0,n.ReplyTopic)({content:this.content,topicid:this.getParameters.topicid}).then(function(o){t.hideLoading(),o.result?(t.showToast({title:o.msg,duration:2e3,icon:"none"}),e.loadPage()):t.showToast({title:o.msg,duration:2e3,icon:"none"}),e.content=""})):t.showToast({title:"请输入回复内容",duration:2e3,icon:"none"});else{var o=this;o.$store.ready(function(e){1==e.isLogin?o.content?(t.showLoading({title:"正在提交中"}),(0,n.ReplyTopic)({content:o.content,topicid:o.getParameters.topicid}).then(function(e){t.hideLoading(),e.result?(t.showToast({title:e.msg,duration:2e3,icon:"none"}),o.loadPage()):t.showToast({title:e.msg,duration:2e3,icon:"none"}),o.content=""})):t.showToast({title:"请输入回复内容",duration:2e3,icon:"none"}):(t.showToast({title:"您未登录，请先登录",duration:1500,icon:"none"}),setTimeout(function(){t.navigateTo({url:"/pages/user/login/index"})},1500),o.content="")})}},moreList:function(){this.getParameters.pageindex>this.pageCount?this.moreStatus="noMore":(this.moreStatus="loading",this.loadPage("more"))},loadPage:function(e){var o=this;"more"==e?(0,n.GetTopicView)(this.getParameters).then(function(t){o.moreStatus="more",t.result&&(o.topiclist=o.topiclist.concat(t.replyList)),o.loaded=!0}):(this.getParameters.pageindex=1,(0,n.GetTopicView)(this.getParameters).then(function(e){e.result?(o.topicData=e,o.pageCount=e.pageCount,1==o.pageCount?o.moreStatus="noMore":o.moreStatus="more",o.topiclist=e.replyList):(o.topiclist=[],o.pageCount=0),o.loaded=!0,t.hideLoading()}))}}};e.default=r}).call(this,o("6e42")["default"])},4657:function(t,e,o){"use strict";o.r(e);var n=o("934a"),i=o("4c0c");for(var a in i)"default"!==a&&function(t){o.d(e,t,function(){return i[t]})}(a);o("ebd2");var s=o("2877"),c=Object(s["a"])(i["default"],n["a"],n["b"],!1,null,"4fb52d9d",null);e["default"]=c.exports},"4c0c":function(t,e,o){"use strict";o.r(e);var n=o("1240"),i=o.n(n);for(var a in n)"default"!==a&&function(t){o.d(e,t,function(){return n[t]})}(a);e["default"]=i.a},"7ee5":function(t,e,o){},"934a":function(t,e,o){"use strict";var n=function(){var t=this,e=t.$createElement;t._self._c},i=[];o.d(e,"a",function(){return n}),o.d(e,"b",function(){return i})},ebd2:function(t,e,o){"use strict";var n=o("7ee5"),i=o.n(n);i.a}},[["0967","common/runtime","common/vendor"]]]);